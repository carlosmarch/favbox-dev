{"version":3,"sources":["Helpers.js","controllers/userController.js","icons/Heart.svg","icons/User.svg","icons/Search.svg","icons/Discover.svg","components/BottomBar.js","icons/Plus.svg","components/Message.js","views/Signup.js","components/Header.js","components/Footer.js","components/BlockTitle.js","icons/HeartFull.svg","components/Like.js","components/Contributor.js","components/Card.js","components/Musiccard.js","components/Podcastcard.js","components/Collectioncard.js","components/Promocard.js","components/Articlelist.js","components/Videocard.js","components/Appcard.js","components/LoadingSpinner.js","App.js","templates/Templates.js","views/Notfound.js","Detail.js","views/About.js","views/Search.js","views/Login.js","components/HeaderMkt.js","views/Home.js","components/FavItem.js","components/Confetti.js","views/Profile.js","views/ExternalProfile.js","views/Likes.js","views/Create.js","serviceWorker.js","index.js","controllers/dataController.js","history.js","controllers/recommendationController.js"],"names":["storeUniqueTopics","records","topics","map","item","fields","temas","uniqueTopics","Array","prototype","concat","apply","filter","val","id","array","indexOf","window","$topics","e","storeUniqueCategories","categories","categorias","uniqueCategories","$categories","getUniqueCategories","getUrlCategory","decodeURIComponent","location","pathname","split","getUrlTopic","pop","truncateText","str","length","ending","substring","getStorageFavs","key","archive","keys","Object","localStorage","i","push","el","getContributor","contributors","contributorIdArray","contributorId","contributor","getCategoryItems","recommendations","categoryName","size","recommendation","includes","slice","getCollectionItems","collectionName","collections","colecciones","filteredCollectionItem","getBlockCategoryItems","catArr","some","tag","bcrypt","require","data","table","apiKey","process","base","findUser","email","name","a","recordExists","options","filterByFormula","getAirtableRecords","user","get","addUser","req","next","history","state","type","message","create","err","record","console","error","setSession","getId","storePassword","password","hash","update","authenticate","then","users","forEach","compare","response","catch","log","Error","getUserByEmail","updateUserLikes","likeArr","userId","getSession","likes","setLocalStorageFavs","removeStorageFavs","setItem","userRecord","JSON","stringify","parse","getItem","isAuthenticated","signOut","clear","userSession","setStorage","getStorage","_extends","assign","target","arguments","source","hasOwnProperty","call","this","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","fill","_ref","svgRef","title","props","width","height","viewBox","ref","ForwardRef","forwardRef","fillRule","clipRule","BottomBar","toggleClass","bind","activeIndex","index","setState","className","to","onClick","Component","Message","userController","SignUp","nameChangeHandler","event","value","isLoading","emailChangeHandler","passwordChangeHandler","handleSubmit","preventDefault","replace","nextProps","src","alt","onSubmit","component","autoComplete","onChange","placeholder","required","pattern","Header","ReactDOM","render","Signup","document","getElementById","isHoveredCategorias","isHoveredTemas","handleHoverCategorias","handleHoverTemas","prevState","onMouseEnter","onMouseLeave","points","categoria","tema","Footer","href","rel","BlockTitle","link","titleclass","descriptionclass","description","Like","handleLike","itemId","userid","isLike","find","removeItem","filtered","likeicon","Contributor","Card","url","style","backgroundImage","imageUrl","topic","autor","Musiccard","Podcastcard","Helpers","Collectioncard","grid","number","Promocard","Articlelist","handleWindowSizeChange","innerWidth","addEventListener","removeEventListener","Videocard","Appcard","LoadingSpinner","App","fetch","$api","resp","json","$alldata","$api_contributors","resp2","sort","Math","random","contribuidor","catTemplate","Notfound","Detail","category","pagedata","$pagedata","datafull","resp3","prevProps","match","params","componentDidMount","matchBlockCat","scrollTo","matchCategoriesWithTemplates","Templates","pagetype","About","Search","Login","HeaderMkt","aria-required","aria-invalid","aria-describedby","mailto","Home","FavItem","data-id","Confetti","colour","ceil","$","css","appendTo","drop","x","animate","top","left","reset","React","dataController","recommendationController","Profile","renderItems","pubItems","likeItems","makeConfetti","checkConfetti","userData","items","hydratedUserWithPubItems","hydrateUserPubItems","getUserPubItems","role","aria-label","ExternalProfile","urlName","Airtable","Likes","getHydratedFavItems","hydratedFavItems","getUserFavs","Create","titleChangeHandler","descriptionChangeHandler","urlChangeHandler","categoriasChangeHandler","temasChangeHandler","onDrop","uploadToCloudinary","addItem","uniqueCats","uniqueTops","getElementsByName","pictureFiles","pictureDataURLs","withPreview","withIcon","singleImage","buttonText","imgExtension","maxFileSize","hidden","disabled","selected","Boolean","hostname","AuthenticatedRoute","rest","from","routing","exact","path","navigator","serviceWorker","ready","registration","unregister","view","pageSize","Promise","resolve","reject","select","eachPage","partialRecords","fetchNextPage","createBrowserHistory","getRecommendationById","hydrateUserLikes","likeIds","recommendationsWithDetails","pubitemIds","pubitemWithDetails","findItem","file","xhr","XMLHttpRequest","fd","FormData","open","setRequestHeader","append","send","onreadystatechange","readyState","status","responseText","secure_url","syncMixLocalwithTableFavs","userlikes","storageFavs","matchingFavs","favId","matchingIds","union","withoutDuplicates","Set","withoutDuplicatesWithDetails","itemsWithDetails"],"mappings":"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","file":"static/js/main.73e1ced1.chunk.js","sourcesContent":["//Stores in window global var unique topics from all the records\nfunction storeUniqueTopics(records){\n  //store window unique topics\n  var topics = records.map(function(item) {return item.fields.temas;})\n  const mergeAllTopics = Array.prototype.concat.apply([], topics);\n  const uniqueTopics = mergeAllTopics.filter((val,id,array) => array.indexOf(val) === id);\n  //global variable for the dropdown\n  window.$topics = uniqueTopics.filter(function(e){return e}); //remove empty ones\n}\n\n//Stores in window global var unique categories from all the records\nfunction storeUniqueCategories(records){\n  //store window unique categories\n  var categories = records.map(function(item) {return item.fields.categorias;})\n  const mergeAllCategories = Array.prototype.concat.apply([], categories);\n  const uniqueCategories = mergeAllCategories.filter((val,id,array) => array.indexOf(val) === id);\n  //global variable for the dropdown\n  window.$categories = uniqueCategories.filter(function(e){return e}); //remove empty ones\n}\n\n//Returns unique categories from all the records\nfunction getUniqueCategories(records){\n  var categories = records.map(function(item) {return item.fields.categorias;})\n  const mergeAllCategories = Array.prototype.concat.apply([], categories);\n  return mergeAllCategories.filter((val,id,array) => array.indexOf(val) === id);\n}\n\n//Returns unique topics from all the records\nfunction getUniqueTopics(records){\n  var topics = records.map(function(item) {return item.fields.temas;})\n  const mergeAllTopics = Array.prototype.concat.apply([], topics);\n  return mergeAllTopics.filter((val,id,array) => array.indexOf(val) === id);\n}\n\n//Returns last second part of the url\nfunction getUrlCategory(){\n  return decodeURIComponent(window.location.pathname.split(\"/\")[1]);\n}\n\n//Returns last part of the url\nfunction getUrlTopic(){\n  return decodeURIComponent(window.location.pathname.split(\"/\").pop());\n}\n\n//@UTILS\n//Truncates text\nfunction truncateText(str, length, ending) {\n    if (length == null) {\n      length = 20;\n    }\n    if (ending == null) {\n      ending = '...';\n    }\n    if (str.length > length) {\n      return str.substring(0, length - ending.length) + ending;\n    } else {\n      return str;\n    }\n  }\n\n  //@STORAGE\n  //Returns an array of favorite items ID\n  function getStorageFavs() {\n    var archive = [],\n        keys = Object.keys(localStorage),\n        i = 0, key;\n    for (; key = keys[i]; i++) {\n        archive.push( key );\n    }\n    //REMOVE USER SESSION FROM LIKES\n    const filtered = archive.filter(item => item !== \"userSession\")\n    const cleanArchive = filtered.filter(function (el) { return el != null; });\n    return cleanArchive;\n  }\n\n  //-------------------------//\n  //-------------------------//\n  //-------------------------//\n  //  RENDER ITEM HELPERS\n  //-------------------------//\n  //-------------------------//\n  //-------------------------//\n\n\n  //Get contributor data by contributor ID \"rec9p8GxW7FJxPtg5\" \"recbofdaqGgFjL20L\"\n  function getContributor(contributors, contributorIdArray){\n    const contributorId = contributorIdArray && contributorIdArray[0]; //check if exists\n    return contributors.filter(contributor => contributor.id.indexOf(contributorId) !== -1);\n  }\n\n  //Get items by category name\n  function getCategoryItems(recommendations, categoryName, size){\n    return recommendations.filter(recommendation => recommendation.fields.categorias?.includes(categoryName)).slice(0, size)\n  }\n\n  //Get items by topic name\n  function getTopicItems(recommendations, topicName, size){\n    const topicItems = [];\n    recommendations.filter(recommendation => recommendation.fields.temas?.includes(topicName)).map(filteredTopicItem => (\n        topicItems.push(filteredTopicItem)\n   ));\n   return topicItems.slice(0, size)\n  }\n\n\n  //Get items by collection name\n  function getCollectionItems(recommendations, collectionName, size){\n    const collections = [];\n    recommendations.filter(recommendation => recommendation.fields.colecciones?.includes(collectionName)).map(filteredCollectionItem => (\n        collections.push(filteredCollectionItem)\n   ));\n   return collections.slice(0, size)\n  }\n\n\n  //Get all items which includes any of categories in passed array\n  function getBlockCategoryItems(recommendations, catArr){\n    return recommendations.filter( (recommendation) => catArr.some((tag) => recommendation.fields.categorias?.includes(tag)) );\n  }\n\n\n  export {\n     storeUniqueTopics,\n     storeUniqueCategories,\n     getUniqueCategories,\n     getUniqueTopics,\n     getUrlCategory,\n     getUrlTopic,\n     truncateText,\n     getContributor,\n     getCategoryItems,\n     getTopicItems,\n     getCollectionItems,\n     getBlockCategoryItems,\n     getStorageFavs\n  };\n","import history from '../history';\n\nconst bcrypt = require('bcryptjs');\nconst data = require('./dataController');\n\n//AIRTABLE HELPERS\nconst Airtable = require('airtable');\nconst base = new Airtable({\n  apiKey: process.env.REACT_APP_AIRTABLE_API_KEY,\n}).base(process.env.REACT_APP_AIRTABLE_BASE_ID);\nconst table = base('contributors');\n\n\n//USER METHODS\nconst findUser = async (email, name) => {\n  let recordExists = false;\n  let options = {};\n  if (email && name) {\n    options = {\n      filterByFormula: `OR(email = '${email}', name = '${name}')`\n    };\n  } else {\n    options = {\n      filterByFormula: `OR(email = '${email}', name = '${email}')`\n    };\n  }\n\n  const users = await data.getAirtableRecords(table, options);\n\n  users.filter(user => {\n    if (user.get('email') === email || user.get('name') === name) {\n      return (recordExists = true);\n    }\n    return (recordExists = false);\n  });\n\n  return recordExists;\n};\n\n\n//USER MANAGEMENT\nexport const addUser = async (req, next) => {\n  const { email, name } = req;\n  const userExists = await findUser(email, name);\n  if (userExists) {\n    history.push({\n      pathname: '/signup',\n      state: {\n        type: 'error',\n        message: 'Username or Email already exists!'\n      }\n    })\n    return;\n  }\n  table.create(\n    {\n      email,\n      name,\n    },\n    function(err, record) {\n      if (err) {\n        console.error(err);\n        return;\n      }\n      //Add id to user data record\n      record.fields['id'] = record.id\n      setSession(record.fields)\n\n      req.id = record.getId();\n      next(req);//Store Pass method called from Signup.js\n    }\n  );\n};\n\nexport const storePassword = (req) => {\n  const { password, id } = req;\n  bcrypt.hash(password, 10, function(err, hash) {\n    if (err) {\n      console.error(err);\n      return;\n    }\n\n    table.update(\n      id,\n      {\n        password: hash,\n      },\n      function(err) {\n        if (err) {\n          console.error(err);\n          return;\n        }\n        history.push({\n          pathname: '/profile',\n          state: {\n            type: 'success',\n            message: 'Your account has been created!!'\n          }\n        })\n\n      }\n    );\n  });\n};\n\nexport const authenticate = (req) => {\n  const { email, password } = req;\n  const options = {\n    filterByFormula: `OR(email = '${email}', name = '${email}')`,\n  };\n\n  data\n    .getAirtableRecords(table, options)\n    .then(users => {\n      if(!users.length){\n        // Not registered\n        history.push({\n          pathname: '/login',\n          state: {\n            type: 'info',\n            message: 'That email is not registered... Try to signup!'\n          }\n        })\n      }\n      users.forEach(function(user) {\n        bcrypt.compare(password, user.get('password'), function(err, response) {\n          if (response) {\n            // Passwords match, response = true\n            //ADD ID TO USER SESSION INFO\n            user.fields['id'] = user.id\n            setSession(user.fields)\n\n            history.push({\n              pathname: '/profile',\n              state: {\n                type: 'info',\n                message: 'Logged in!'\n              }\n            })\n\n          } else {\n            // Passwords don't match\n            //console.log('authenticate','Passwords dont match')\n            history.push({\n              pathname: '/login',\n              state: {\n                type: 'error',\n                message: 'Passwords dont match'\n              }\n            })\n\n          }\n        });\n      });\n    })\n    .catch(err => {\n      console.log(Error(err));\n    });\n};\n\n\nexport const getUserByEmail = (req, next) => {\n  const options = {\n    filterByFormula: `OR(email = '${req}', name = '${req}')`\n  }\n  data.getAirtableRecords(table, options)\n    .then( users => {\n      //console.log(users)\n      users.forEach(function(user) {\n        //console.log(user, user.fields.likes)\n        return user;\n      });\n    })\n    .catch(err => {\n      console.log( Error(err));\n    });\n}\n\n\nexport const updateUserLikes = (likeArr) => {\n  const userId = getSession()?.id\n  console.log('updateUserLikes', userId, likeArr)\n  if (!userId) return;\n  table.update(\n    userId,\n    {\n      likes: likeArr,\n    },\n    function(err) {\n      if (err) {\n        console.error(err);\n        return;\n      }\n    }\n  );\n}\n\n\nexport const setLocalStorageFavs = (likeArr) => {\n  if ( typeof(likeArr) === 'undefined') return\n  //clear storage favs\n  removeStorageFavs()\n  for( const id of likeArr) {\n    localStorage.setItem(id, true);\n  }\n}\n\n// @LOCALSTORAGE\n// User Session Helpers\n//\nexport const setSession = (userRecord) => {\n  //Arrives user.fields\n  delete userRecord.password //Dont store encrypted pass\n  localStorage.setItem('userSession', JSON.stringify(userRecord));\n}\n\nexport const getSession = () => {\n  return JSON.parse(localStorage.getItem('userSession'));\n}\n\nexport const isAuthenticated = () => {\n  if( localStorage.getItem('userSession') === null ){\n    return false\n  }else{\n    return true\n  }\n}\n\nexport const signOut = () =>{\n  localStorage.clear();\n  history.push({\n    pathname: '/'\n  })\n}\n\nexport const removeStorageFavs = () =>{\n  //Get userSession, delete  all the rest & Set Session again\n  let userSession = JSON.parse(localStorage.getItem('userSession'));\n  localStorage.clear();\n  localStorage.setItem('userSession', JSON.stringify(userSession));\n}\n\n//@LOCALSTORAGE\n//DATA HELPERS NOT USED\nexport const setStorage = (key, data) => {\n  localStorage.setItem(key, JSON.stringify(data));\n}\nexport const getStorage = (key) => {\n  return JSON.parse(localStorage.getItem(key));\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.9996 22L2.98736 13.305C2.36361 12.7251 1.86334 12.0081 1.52045 11.2026C1.17757 10.3971 1.00007 9.52194 1 8.63643C0.999927 7.75091 1.17728 6.87572 1.52003 6.07016C1.86278 5.2646 2.36293 4.5475 2.98659 3.96745C4.21624 2.79388 5.78832 2.11615 7.43297 2.05061C9.07762 1.98506 10.6922 2.53579 11.9997 3.60825C13.2762 2.52466 14.8668 1.95639 16.494 2.00261C18.1212 2.04884 19.6816 2.70662 20.9028 3.86117L21.0134 3.96746C21.637 4.54753 22.1371 5.26461 22.4799 6.07012C22.8226 6.87564 23 7.75078 23 8.63626C23 9.52173 22.8226 10.3969 22.4799 11.2024C22.1371 12.0079 21.637 12.725 21.0134 13.305L11.9996 22ZM7.68692 5.39519C6.77446 5.38255 5.88941 5.72965 5.19966 6.37064C4.88129 6.64366 4.62209 6.98771 4.44003 7.37892C4.25797 7.77014 4.1574 8.19916 4.14531 8.63624C4.15102 9.04752 4.23828 9.45279 4.40128 9.8251C4.56428 10.1974 4.79928 10.5282 5.09067 10.7956L11.9996 17.4622L18.91 10.7956C19.2056 10.5321 19.4435 10.2021 19.6067 9.82881C19.77 9.45557 19.8546 9.04833 19.8545 8.63604C19.8544 8.22374 19.7697 7.81653 19.6063 7.44336C19.4429 7.07018 19.2049 6.74021 18.9092 6.4769L18.7979 6.36892C18.1019 5.73989 17.2211 5.39505 16.3111 5.39536C15.4011 5.39567 14.5204 5.7411 13.8248 6.37061L12.0011 8.13121L10.175 6.37062C9.48502 5.72948 8.59966 5.38238 7.68692 5.39519Z\",\n  fill: \"#02272C\"\n});\n\nvar SvgHeart = function SvgHeart(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgHeart, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Heart.143a351b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M17.5 6.5C17.5 9.5 15 12 12 12C9 12 6.5 9.5 6.5 6.5C6.5 3.5 9 1 12 1C15 1 17.5 3.5 17.5 6.5ZM14.5 6.5C14.5 5.1 13.4 4 12 4C10.6 4 9.5 5.1 9.5 6.5C9.5 7.9 10.6 9 12 9C13.4 9 14.5 7.9 14.5 6.5ZM3 20C3 16.7 5.7 14 9 14H15C18.3 14 21 16.7 21 20V23H18V20C18 18.3 16.6 17 15 17H9C7.4 17 6 18.3 6 20V23H3V20Z\",\n  fill: \"#02272C\"\n});\n\nvar SvgUser = function SvgUser(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgUser, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/User.3a38ace7.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18.5443 16.3731C19.6147 14.8746 20.2263 13.0703 20.2263 11.1132C20.2263 6.09786 16.1284 2 11.1131 2C6.09786 2 2 6.09786 2 11.1132C2 16.1284 6.09786 20.2263 11.1131 20.2263C13.0703 20.2263 14.8746 19.6147 16.3731 18.5443L19.8287 22L22 19.8287L18.5443 16.3731ZM5.08869 11.1132C5.08869 7.74924 7.77982 5.0581 11.1437 5.0581C14.5076 5.0581 17.1682 7.74924 17.1682 11.1132C17.1682 14.4771 14.4771 17.1376 11.1437 17.1376C7.8104 17.1376 5.08869 14.4465 5.08869 11.1132Z\",\n  fill: \"#02272C\"\n});\n\nvar SvgSearch = function SvgSearch(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSearch, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Search.5c801df8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M7.43293 18.7605C7.58298 18.9139 7.78648 19 7.99868 19H15.9996C16.2118 19 16.4153 18.9139 16.5653 18.7605C16.7153 18.6072 16.7996 18.3992 16.7996 18.1824V15.696C18.2721 14.5695 19.3189 12.9581 19.7634 11.1342C20.2078 9.31017 20.0225 7.38533 19.2389 5.68477C18.4553 3.98422 17.1213 2.61217 15.4623 1.8004C13.8033 0.988632 11.921 0.786892 10.1333 1.22926C8.1833 1.69521 6.48172 2.90612 5.37769 4.61354C4.22471 6.34445 3.77046 8.46356 4.10974 10.5285C4.44903 12.5935 5.55564 14.4448 7.19859 15.696V18.1824C7.19859 18.3992 7.28289 18.6072 7.43293 18.7605ZM13.5993 13.8819V16H10.3989V13.8819L9.60354 13.4092C8.87323 12.9859 8.26585 12.3722 7.84336 11.6307C7.42087 10.8892 7.19838 10.0465 7.19859 9.18852C7.19859 7.88743 7.70436 6.63964 8.60463 5.71963C9.50491 4.79963 10.7259 4.28277 11.9991 4.28277C13.2723 4.28277 14.4933 4.79963 15.3936 5.71963C16.2939 6.63964 16.7996 7.88743 16.7996 9.18852C16.7999 10.0465 16.5774 10.8892 16.1549 11.6307C15.7324 12.3722 15.125 12.9859 14.3947 13.4092L13.5993 13.8819ZM14.6002 20H13.0002H11.4001H9.80003C9.35819 20 9 20.3582 9 20.8C9 21.2419 9.35819 21.6001 9.80003 21.6001H10.6001L10.6001 22.2C10.6001 22.6418 10.9582 23 11.4001 23H13.0002C13.442 23 13.8002 22.6418 13.8002 22.2L13.8002 21.6001H14.6002C15.0421 21.6001 15.4003 21.2419 15.4003 20.8C15.4003 20.3582 15.0421 20 14.6002 20Z\",\n  fill: \"#02272C\"\n});\n\nvar SvgDiscover = function SvgDiscover(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgDiscover, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Discover.389bf999.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component } from \"react\";\nimport { Link } from 'react-router-dom';\nimport {ReactComponent as LikeIcon} from '../icons/Heart.svg';\nimport {ReactComponent as UserIcon} from '../icons/User.svg';\nimport {ReactComponent as SearchIcon} from '../icons/Search.svg';\nimport {ReactComponent as DiscoverIcon} from '../icons/Discover.svg';\n\nclass BottomBar extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.toggleClass= this.toggleClass.bind(this);\n    this.state = {\n      activeIndex: null\n    }\n  }\n\n  toggleClass(index, e) {\n\n      this.setState({ activeIndex: index });\n  };\n\n  render() {\n\n    return (\n      <div className=\"bottombar\">\n        <div className=\"bottombar-wapper\">\n              <Link to=\"/feed\" className={`bottombar-item-icon ${this.state.activeIndex===0 ? 'tab-active': ''}`}  onClick={this.toggleClass.bind(this, 0)}>\n                <DiscoverIcon className=\"\"/>\n              </Link>\n              <Link to=\"/search\" className={`bottombar-item-icon ${this.state.activeIndex===1 ? 'tab-active': ''}`} onClick={this.toggleClass.bind(this, 1)}>\n                <SearchIcon className=\"\"/>\n              </Link>\n              <Link to=\"/likes\" className={`bottombar-item-icon ${this.state.activeIndex===2 ? 'tab-active': ''}`}  onClick={this.toggleClass.bind(this, 2)}>\n                <LikeIcon className=\"\"/>\n              </Link>\n              <Link to=\"/profile\" className={`bottombar-item-icon ${this.state.activeIndex===3 ? 'tab-active': ''}`}  onClick={this.toggleClass.bind(this, 3)}>\n                <UserIcon className=\"\"/>\n              </Link>\n              <span className=\"active-line\"></span>\n        </div>\n      </div>\n\n    );\n  }\n}\n\nexport default BottomBar;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M14.4142 1.68631L11.5858 1.68631L11.5858 11.5859L1.68636 11.5859L1.68636 14.4143L11.5858 14.4143L11.5858 24.3138L14.4142 24.3138L14.4142 14.4143L24.3138 14.4143L24.3138 11.5859L14.4142 11.5859L14.4142 1.68631Z\",\n  fill: \"#02272C\"\n});\n\nvar SvgPlus = function SvgPlus(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 26,\n    height: 26,\n    viewBox: \"0 0 26 26\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgPlus, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Plus.366ff493.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component } from \"react\";\n\nclass Message extends Component {\n  render() {\n    return (\n\n        <div className={`message ${this.props.type}`}>{this.props.message}</div>\n\n    );\n  }\n}\n\nexport default Message;\n","import React, { Component } from \"react\";\nimport { Link } from 'react-router-dom';\nimport history from '../history';\nimport Message from '../components/Message';\n\nconst userController = require('../controllers/userController');\n\nclass SignUp extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      isLoading: false\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  nameChangeHandler = (event) => {\n    this.setState({name: event.target.value});\n    this.setState({isLoading: false});\n  }\n\n  emailChangeHandler = (event) => {\n    this.setState({email: event.target.value});\n    this.setState({isLoading: false});\n  }\n\n  passwordChangeHandler = (event) => {\n    this.setState({password: event.target.value});\n    this.setState({isLoading: false});\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    //ADD USER WITH FORM DATA THEN STORE PASSWORD\n    console.log('SignUp state',this.state)\n    userController.addUser(this.state, userController.storePassword)\n    this.setState({isLoading: true});\n  }\n  componentDidMount(){\n    //Clear history state messages\n    if (history.location.state && history.location.state.message) {\n        let state = { ...history.location.state };\n        delete state.message\n        delete state.type\n        history.replace({ ...history.location, state });\n    }\n    this.setState({isLoading: false});\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({isLoading: false});\n  }\n\n  render() {\n\n    return (\n\n      <div className=\"app_wrapper signup_view\">\n        <header className=\"header no@m\">\n          <div className=\"container text-center\">\n            <Link to=\"/\"><img className=\"logo\" src={process.env.PUBLIC_URL + '/logo.svg'} alt=\"logo\"/></Link>\n          </div>\n        </header>\n        <div className=\"global\">\n          <div className=\"container container-s\">\n\n            <div className=\"form-container\">\n              <div className=\"mb-s text-center\">\n                <Link to=\"/\"><img className=\"logo mb-m no@dkt\" src={process.env.PUBLIC_URL + '/logo.svg'} alt=\"logo\"/></Link>\n                <h3 className=\"centered\">Get started</h3>\n                <p>Absolutely free.</p>\n              </div>\n\n              {history.location.state && this.props.location.state?.message ?\n                <Message type={this.props.location.state.type} message={this.props.location.state.message}/>\n                : ''}\n\n              <form onSubmit={this.handleSubmit} className=\"signup-form\">\n                <div>\n                  <label>Name</label>\n                  <input\n                    name=\"name\"\n                    component=\"input\"\n                    type=\"text\"\n                    autoComplete=\"name\"\n                    onChange={this.nameChangeHandler}\n                    placeholder=\"Dieter Rams\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label>Email</label>\n                  {history.location.state && this.props.location.state?.email ?\n                    <input\n                    name=\"email\"\n                    component=\"input\"\n                    type=\"email\"\n                    autoComplete=\"email\"\n                    onChange={this.emailChangeHandler}\n                    placeholder=\"dieter@rams.com\"\n                    required\n                    value={this.props.location.state.email} />\n                  :\n                    <input\n                    name=\"email\"\n                    component=\"input\"\n                    type=\"email\"\n                    autoComplete=\"email\"\n                    onChange={this.emailChangeHandler}\n                    placeholder=\"dieter@rams.com\"\n                    required />\n                  }\n                </div>\n                <div>\n                  <label>Password</label>\n                  <input\n                    name=\"password\"\n                    component=\"input\"\n                    type=\"password\"\n                    autoComplete=\"current-password\"\n                    pattern=\".{8,}\"\n                    onChange={this.passwordChangeHandler}\n                    placeholder=\"At least 8 characters\"\n                    required\n                  />\n                </div>\n\n                <button className=\"button submitbtn inline\" type=\"submit\">{this.state.isLoading ? 'loading' : 'SignUp'}</button>\n              </form>\n              <span className=\"centered\">Already have an account? <Link to=\"/login\" className=\"link\">Login</Link></span>\n            </div>\n\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default SignUp;\n","import React, { Component } from \"react\";\nimport ReactDOM from 'react-dom';\nimport { Link } from 'react-router-dom';\nimport {ReactComponent as UserIcon} from '../icons/User.svg';\nimport {ReactComponent as LikeIcon} from '../icons/Heart.svg';\nimport {ReactComponent as AddIcon} from '../icons/Plus.svg';\n\nimport Signup from '../views/Signup';\n\nconst userController = require('../controllers/userController.js');\n\nclass Header extends Component {\n\n  constructor(){\n      super();\n      this.state = {\n          isHoveredCategorias: false,\n          isHoveredTemas: false,\n          categorias: [],\n          temas: [],\n          email:''\n      };\n      this.handleHoverCategorias = this.handleHoverCategorias.bind(this);\n      this.handleHoverTemas = this.handleHoverTemas.bind(this);\n  }\n\n  handleHoverCategorias(){\n      this.setState(prevState => ({\n          isHoveredCategorias: !prevState.isHoveredCategorias\n      }));\n\n      this.setState({\n        categorias: window.$categories,\n        temas: window.$topics\n      });\n  }\n\n  handleHoverTemas(){\n      this.setState(prevState => ({\n          isHoveredTemas: !prevState.isHoveredTemas\n      }));\n      this.setState({\n        categorias: window.$categories,\n        temas: window.$topics\n      });\n  }\n\n  emailChangeHandler = (event) => {\n    this.setState({email: event.target.value});\n  }\n  handleSubmit = (event) => {\n    event.preventDefault();\n    ReactDOM.render(<Signup email={this.state.email}/>, document.getElementById('root'))\n  }\n\n\n  render() {\n\n    return (\n      <header className=\"header no@m\">\n        <div className=\"container flex-justify\">\n\n          <ul id=\"primarymenu\" className=\"nav menu\">\n\n            <li><Link to=\"/\"><img className=\"logo\" src={process.env.PUBLIC_URL + '/logo.svg'} alt=\"logo\"/></Link></li>\n\n            <li><Link to=\"/feed\">Discover</Link></li>\n\n            <li id=\"menuitem-categorias\" className={ this.state.isHoveredCategorias ? \"hoverstate\" : \"\" } onMouseEnter={this.handleHoverCategorias} onMouseLeave={this.handleHoverCategorias}>\n              <div>Feel like?</div>\n              <svg viewBox=\"0 0 30 30\" className=\"chevron\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg>\n              <div id={'dropdown-categorias'} className=\"drop-overlay\">\n                <ul>\n                  {this.state.categorias && this.state.categorias.map((categoria, key) =>\n                    <li key={key}>\n                      <Link to={`/categorias/${categoria}`}>{categoria}</Link>\n                    </li>\n                  )}\n                </ul>\n              </div>\n            </li>\n\n            <li id=\"menuitem-temas\" className={ this.state.isHoveredTemas ? \"hoverstate\" : \"\" } onMouseEnter={this.handleHoverTemas} onMouseLeave={this.handleHoverTemas}>\n              <div>Topics</div>\n              <svg viewBox=\"0 0 30 30\" className=\"chevron\"><polygon points=\"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 \"></polygon></svg>\n              <div id={'dropdown-temas'} className=\"drop-overlay\">\n                <ul>\n                  {this.state.temas && this.state.temas.map((tema, key) =>\n                    <li key={key}>\n                      <Link to={`/temas/${tema}`}>{tema}</Link>\n                    </li>\n                  )}\n                </ul>\n              </div>\n            </li>\n          </ul>\n          { userController.isAuthenticated() ? (\n            <ul id=\"usermenu\" className=\"nav menu\">\n              <li>\n                <Link to=\"/create\" className=\"link\"><AddIcon /> Create</Link>\n              </li>\n              <li>\n                <Link to=\"/likes\"><LikeIcon /> Likes</Link>\n              </li>\n              <li>\n                <Link to=\"/profile\"><UserIcon /> Profile</Link>\n              </li>\n            </ul>\n          ) : (\n            <div className=\"button button-outline button-header-login\"><Link to=\"/signup\">SignUp</Link></div>\n          )}\n\n\n        </div>\n      </header>\n    );\n  }\n}\n\nexport default Header;\n","import React, { Component } from \"react\";\n\nclass Footer extends Component {\n  render() {\n    return (\n      <footer className=\"footer no@m\">\n        <div className=\"container\">\n                <div className=\"footnote\">Gracias a Joan Mir por la inspiracin. Y a un buen puado de productos digitales excelentes\n                  <br/>\n                  <a href=\"https://vsco.co/\" target=\"_blank\" rel=\"noopener noreferrer\">Vsco</a>,\n                  <a href=\"https://stripe.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Stripe</a>,\n                  <a href=\"https://www.mapbox.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Mapbox</a>,\n                  <a href=\"https://www.intercom.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Intercom</a>,\n                  <a href=\"https://www.typeform.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Typeform</a>,\n                  <a href=\"https://www.notion.so/\" target=\"_blank\" rel=\"noopener noreferrer\">Notion</a>,\n                  <a href=\"https://www.shopify.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Shopify</a>,\n                  <a href=\"https://www.eventbrite.es/\" target=\"_blank\" rel=\"noopener noreferrer\">Eventbrite</a>,\n                  <a href=\"https://airtable.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Airtable</a> &\n                  <a href=\"https://es.reactjs.org/\" target=\"_blank\" rel=\"noopener noreferrer\">React</a>\n                  <br/>\n                  que me han inspirado a programar y disear este proyecto.\n                </div>\n                <div className=\"divider\"></div>\n                <div className=\"footnote\">Hecho con cario durante la cuarentena del COVID19. #yomequedoencasa v0.1</div>\n        </div>\n      </footer>\n    );\n  }\n}\n\nexport default Footer;\n","import React, { Component } from \"react\";\nimport { Link } from 'react-router-dom';\n\nclass BlockTitle extends Component {\n  render() {\n\n    return (\n        <div className=\"container title-block\">\n          {this.props.link ? <Link to={this.props.link} className={`block-title title-has-arrow ${this.props.titleclass}`}>{this.props.title}</Link> : <h2 className={`block-title ${this.props.titleclass}`}>{this.props.title}</h2>}\n          <p className={`block-description ${this.props.descriptionclass}`}>{this.props.description}</p>\n        </div>\n    );\n  }\n}\n\nexport default BlockTitle;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M2.98736 13.305L11.9996 22L21.0134 13.305C21.637 12.725 22.1371 12.0079 22.4799 11.2024C22.8226 10.3969 23 9.52173 23 8.63626C23 7.75078 22.8226 6.87564 22.4799 6.07012C22.1371 5.26461 21.637 4.54753 21.0134 3.96746L20.9028 3.86117C19.6816 2.70662 18.1212 2.04884 16.494 2.00261C14.8668 1.95639 13.2762 2.52466 11.9997 3.60825C10.6922 2.53579 9.07762 1.98506 7.43297 2.05061C5.78832 2.11615 4.21624 2.79388 2.98659 3.96745C2.36293 4.5475 1.86278 5.2646 1.52003 6.07016C1.17728 6.87572 0.999927 7.75091 1 8.63643C1.00007 9.52194 1.17757 10.3971 1.52045 11.2026C1.86334 12.0081 2.36361 12.7251 2.98736 13.305Z\",\n  fill: \"#EB4962\"\n});\n\nvar SvgHeartFull = function SvgHeartFull(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgHeartFull, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/HeartFull.e07c0bed.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component } from \"react\";\nimport {ReactComponent as LikeIcon} from '../icons/Heart.svg';\nimport {ReactComponent as LikeIconActive} from '../icons/HeartFull.svg';\nimport history from '../history';\nconst userController = require('../controllers/userController.js');\n\n\nconst Airtable = require('airtable');\nconst base = new Airtable({\n  apiKey: process.env.REACT_APP_AIRTABLE_API_KEY,\n}).base(process.env.REACT_APP_AIRTABLE_BASE_ID);\nconst table = base('contributors');\n\n\n\nclass Like extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLike: localStorage.getItem(this.props.itemId) !== null  //Default False -> if NOT NULL ||  if Exists -> True\n    };\n  }\n\n\n  handleLike = (e) => {\n    console.log('handleLike',this.props.itemId)\n    e.preventDefault();\n    const item = e.target.value;\n    const userid = userController.getSession()?.id;\n    const itemId = this.props.itemId\n\n    if ( !userController.isAuthenticated() ){\n      history.push({ pathname: '/signup' })\n      return\n    }\n\n    if (localStorage.getItem(item) === null) {\n      //CREATE a like\n      //First local\n      localStorage.setItem(item, true);\n      this.setState({isLike: true});\n      //GET table likes\n      let likeArr = []\n      table.find(userid, (err, record) => {\n          if (err) {\n            console.error(err)\n            return\n          }\n          if(typeof record.get('likes') === 'undefined') {\n             //empty\n             likeArr.push(itemId)\n          }else{\n            likeArr = record.get('likes')\n            likeArr.push(itemId)\n          }\n          //UPDATE Table likes with added\n          table.update( userid, { likes: likeArr, },\n            function(err, record) {\n              if (err) {\n                console.error(err);\n                return;\n              }\n              //console.log('created', likeArr)\n            }\n          );\n      })\n      return true\n\n\n    }else{\n      //REMOVE the like\n      //First local\n      localStorage.removeItem(item);\n      this.setState({isLike: false});\n      //GET table likes\n      let filtered = []\n      table.find(userid, (err, record) => {\n        if (err) {\n          console.error(err)\n          return\n        }\n        if(typeof record.get('likes') === 'undefined') {\n           //empty\n           return\n        }else{\n          filtered = record.get('likes').filter(item => item !== itemId)\n          //console.log('filtered',filtered)\n        }\n        //UPDATE Table likes removing the like\n        table.update( userid, { likes: filtered, },\n          function(err, record) {\n            if (err) {\n              console.error(err);\n              return;\n            }\n            //console.log('removed', filtered)\n          }\n        )\n      })\n      return false\n    }\n  }\n\n\n  render() {\n    let likeicon;\n    //likeicon.removeEventListener('click')\n    if (this.state.isLike) {\n      likeicon = <LikeIconActive />;\n    } else {\n      likeicon = <LikeIcon />;\n    }\n\n    return (\n      <div className=\"like\">\n        <button className={`likebutton is-like-${this.state.isLike}`} value={this.props.itemId} onClick={this.handleLike}>\n            {likeicon}\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default Like;\n","import React, { Component } from \"react\";\nimport {ReactComponent as UserIcon} from '../icons/User.svg';\nimport { Link } from 'react-router-dom';\n\n//@TODO\n//REVIEW DEFAULT VALUES && EMPTY USERS\n//this.props.contributor.avatar[0].url\n\nclass Contributor extends Component {\n\n  render() {\n    if(!this.props.contributor) return(\n      <div className=\"contributor\"></div>\n    )\n\n    return (\n\n      <div className=\"contributor\">\n        <div className=\"user-badge\">\n          <UserIcon />\n        </div>\n        <div className=\"contributor-info\">\n          <Link to={`/profile/${this.props.contributor.name}`} className=\"contributor-name link-inverted\">{this.props.contributor.name}</Link>\n          <div className=\"contributor-description\">{this.props.contributor.description}</div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Contributor;\n","import React, { Component } from \"react\";\nimport { Link } from 'react-router-dom';\nimport Like from './Like';\nimport Contributor from './Contributor';\n\nclass Card extends Component {\n\n  render() {\n\n    return (\n\n      <a className=\"card grid__item width-3/12 width-6/12@m\" href={this.props.url} target=\"_blank\" style={{backgroundImage: `url(${this.props.imageUrl})`}} rel=\"noopener noreferrer\">\n        <Like itemId={this.props.itemId}/>\n        <div className={`card-content ${\"is-\" + this.props.categorias}`}>\n          <div className=\"card-category badge inline\">{this.props.categorias}</div>\n          <h3 className=\"card-title\">{this.props.title}</h3>\n          <div className=\"card-description\">{this.props.description}</div>\n          <div className=\"card-topics\">\n\n            {this.props.temas?.map((topic, key) => {return (<Link to={ '/temas/' + topic } key={key}>#{topic}</Link>)})}\n\n          </div>\n          <Contributor contributor={this.props.autor[0]?.fields}/>\n        </div>\n      </a>\n\n    );\n  }\n}\n\nexport default Card;\n","import React, { Component } from \"react\";\nimport Like from './Like';\nimport Contributor from './Contributor';\n\nclass Musiccard extends Component {\n  render() {\n\n\n    return (\n      <a className=\"musiccard width-3/12 width-6/12@m\" href={this.props.url} target=\"_blank\" rel=\"noopener noreferrer\">\n        <div className=\"musiccard-album\">\n          <Like itemId={this.props.itemId}/>\n          <div className=\"musiccard-album-contents\">\n            <img className=\"play\" src={process.env.PUBLIC_URL + '/img/play.svg'} alt=\"play\"/>\n            <Contributor contributor={this.props.autor[0]?.fields}/>\n          </div>\n          <img className=\"musiccard-album-img\" src={this.props.imageUrl} alt=\"cover\"/>\n        </div>\n        <h6 className=\"musiccard-title\">{this.props.title}</h6>\n        <div className=\"musiccard-description\">{this.props.description}</div>\n      </a>\n    );\n  }\n}\n\nexport default Musiccard;\n","import React, { Component } from \"react\";\nimport * as Helpers from '../Helpers';\nimport Like from './Like';\nimport Contributor from './Contributor';\n\nclass Podcastcard extends Component {\n  render() {\n\n\n    return (\n      <a className=\"podcastcard width-6/12 width-12/12@m\" href={this.props.url} target=\"_blank\" rel=\"noopener noreferrer\">\n\n        <div className=\"podcastcard-album\">\n          <div className=\"podcastcard-album-contents\">\n            <img className=\"play\" src={process.env.PUBLIC_URL + '/img/play.svg'} alt=\"play\"/>\n          </div>\n          <img className=\"podcastcard-album-img\" src={this.props.imageUrl} alt=\"cover\"/>\n        </div>\n        <Like itemId={this.props.itemId}/>\n        <div className=\"podcastcard-content\">\n          <h6 className=\"podcastcard-title\">{this.props.title}</h6>\n          <div className=\"podcastcard-description\">{Helpers.truncateText(this.props.description, 70)}</div>\n          <Contributor contributor={this.props.autor[0]?.fields}/>\n        </div>\n\n      </a>\n    );\n  }\n}\n\nexport default Podcastcard;\n","import React, { Component } from \"react\";\nimport { Link } from 'react-router-dom';\n\nclass Collectioncard extends Component {\n  render() {\n    return (\n\n        <Link to={ '/colecciones/' + this.props.title } className={`grid__item collection-card bg-cyan ${this.props.grid} width-12/12@m`}>\n          <div className=\"collection-card__title-container\">\n            <h3 className=\"collection-card__title\">\n              {this.props.title}\n            </h3>\n          </div>\n          <div className=\"collection-card__number\">{this.props.number} Items publicados</div>\n      </Link>\n    );\n  }\n}\n\nexport default Collectioncard;\n","import React, { Component } from \"react\";\n\nclass Promocard extends Component {\n  render() {\n\n\n    return (\n\n      <div className=\"Promo mt-l no@m\">\n        <div className=\"container\">\n          <div className=\"Promocard grid mt-xl\">\n              <div className=\"grid__item width-10/12 width-12/12@m\">\n                <div className=\"sticker\">\n                  <span className=\"letter\">H</span>\n                  <span className=\"letter\">E</span>\n                  <span className=\"letter\">Y</span>\n                  <span className=\"letter\">!</span>\n                </div>\n                <h3>Tell us what you like</h3>\n                <p>We will find recommendations for you and you can share your favorite inspiration sources.</p>\n              </div>\n              <div className=\"grid__item width-2/12 width-12/12@m\">\n                <a className=\"button\" href=\"/signup\">Get started!</a>\n              </div>\n          </div>\n        </div>\n      </div>\n\n    );\n  }\n}\n\nexport default Promocard;\n","import React, { Component } from \"react\";\nimport Like from './Like';\nimport Contributor from './Contributor';\n\nclass Articlelist extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      width: window.innerWidth,\n    };\n  }\n\n  componentWillMount() {\n    window.addEventListener('resize', this.handleWindowSizeChange);\n  }\n\n  // make sure to remove the listener\n  // when the component is not mounted anymore\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleWindowSizeChange);\n  }\n\n  handleWindowSizeChange = () => {\n    this.setState({ width: window.innerWidth });\n  };\n\n  render() {\n    const { width } = this.state;\n    const isMobile = width <= 500;\n\n    if (isMobile) {\n      return (\n        <a className=\"articlelist\" href={this.props.url} target=\"_blank\" rel=\"noopener noreferrer\">\n          <div className=\"articlelist-title\">\n            <div className=\"articlelist-category badge inline\">{this.props.categorias}</div>\n            <h5>{this.props.title}</h5>\n          </div>\n          <div className=\"articlelist-description\">\n            <p>{this.props.description}</p>\n            <Contributor contributor={this.props.autor[0]?.fields}/>\n          </div>\n          <Like itemId={this.props.itemId}/>\n        </a>\n      );\n    } else {\n      return (\n        <a className=\"articlelist\" href={this.props.url} target=\"_blank\" rel=\"noopener noreferrer\">\n          <div className=\"articlelist-title\">\n            <h5>{this.props.title}</h5>\n            <Contributor contributor={this.props.autor[0]?.fields}/>\n          </div>\n          <div className=\"articlelist-description\">\n            <div className=\"articlelist-category badge inline\">{this.props.categorias}</div>\n            <p>{this.props.description}</p>\n          </div>\n          <Like itemId={this.props.itemId}/>\n        </a>\n      );\n    }\n  }\n}\n\nexport default Articlelist;\n","import React, { Component } from \"react\";\nimport * as Helpers from '../Helpers';\nimport Like from './Like';\nimport Contributor from './Contributor';\n\nclass Videocard extends Component {\n  render() {\n\n    return (\n      <div className=\"videocard width-4/12 width-6/12@m\">\n        <Like itemId={this.props.itemId}/>\n        <a className=\"videocard-cover\" href={this.props.url} target=\"_blank\" rel=\"noopener noreferrer\">\n          <img className=\"play\" src={process.env.PUBLIC_URL + '/img/play.svg'} alt=\"play\"/>\n          <img className=\"videocard-cover-img\" src={this.props.imageUrl} alt=\"cover\"/>\n        </a>\n        <h6 className=\"videocard-title\">{Helpers.truncateText(this.props.title, 40)}</h6>\n        <div className=\"videocard-description\">{Helpers.truncateText(this.props.description, 90)}</div>\n        <Contributor contributor={this.props.autor[0]?.fields}/>\n      </div>\n    );\n  }\n}\n\nexport default Videocard;\n","import React, { Component } from \"react\";\nimport * as Helpers from '../Helpers';\nimport Like from './Like';\nimport Contributor from './Contributor';\n\nclass Appcard extends Component {\n  render() {\n\n    return (\n\n      <a className=\"appcard width-6/12 width-12/12@m\" href={this.props.url} target=\"_blank\" rel=\"noopener noreferrer\">\n\n        <div className=\"appcard-icon-wrap\">\n          <div className=\"appcard-icon\">\n            <Like itemId={this.props.itemId}/>\n            <img className=\"appcard-img\" src={this.props.imageUrl} alt=\"icon\"/>\n          </div>\n        </div>\n\n        <div className=\"appcard-content\">\n          <h6 className=\"appcard-title\">{this.props.title}</h6>\n          <div className=\"appcard-description\">{Helpers.truncateText(this.props.description, 50)}</div>\n          <Contributor contributor={this.props.autor[0]?.fields}/>\n        </div>\n      </a>\n    );\n  }\n}\n\nexport default Appcard;\n","import React, { Component } from \"react\";\n\nclass LoadingSpinner extends Component {\n  render() {\n\n    return (\n        <div className=\"container loader-container\">\n          <div className=\"rotating-wrapper\">\n            <img src={process.env.PUBLIC_URL + '/img/text.svg'} className=\"rotating-text rotating\" alt=\"Mequedoencasa\"/>\n          </div>\n        </div>\n    );\n  }\n}\n\nexport default LoadingSpinner;\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport * as Helpers from './Helpers';\n\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport BlockTitle from './components/BlockTitle';\nimport Card from './components/Card';\nimport Musiccard from './components/Musiccard';\nimport Podcastcard from './components/Podcastcard';\nimport Collectioncard from './components/Collectioncard';\nimport Promocard from './components/Promocard';\nimport Articlelist from './components/Articlelist';\nimport Videocard from './components/Videocard';\nimport Appcard from './components/Appcard';\nimport LoadingSpinner from './components/LoadingSpinner';\n\nconst userController = require('./controllers/userController.js');\n\n\nclass App extends Component {\n\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      recommendations: [],\n      contributors: [],\n      isAuthenticated: userController.isAuthenticated()\n    };\n  }\n\n  componentDidMount() {\n    fetch(window.$api)\n    .then((resp) => resp.json())\n    .then(data => {\n      Helpers.storeUniqueTopics(data.records)\n      Helpers.storeUniqueCategories(data.records)\n      window.$alldata = data.records;\n\n      return fetch(window.$api_contributors)\n\n    })\n    .then((resp2, data) => resp2.json())\n    .then(contributors => {\n      delete contributors.records['password'];\n      this.setState({\n        isLoading: false,\n        recommendations: window.$alldata.sort(() => Math.random() - 0.5),//random order\n        contributors: contributors.records}\n      );\n      //console.log('allcontributors',contributors.records)\n      //console.log('contributors',this.state.contributors)\n      //console.log('recommendations',this.state.recommendations)\n\n    })\n    .catch(err => {\n      // Error\n    });\n  }\n\n  render() {\n\n          return (\n            <div className=\"app_wrapper app_view\">\n\n              <Header />\n\n              <div className=\"global appview\">\n\n                <main>\n\n                    <div className=\"GridCard mb-l\">\n                        <BlockTitle title={'Libros'} description={'Las recomendaciones mas destacadas'} link={'categorias/libro'}/>\n                        <div className=\"container container-xl\">\n                            <div className=\"grid\">\n                              {this.state.isLoading ? <LoadingSpinner /> : Helpers.getCategoryItems(this.state.recommendations, 'libro', 4).map((records) =>\n                                <Card {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(this.state.contributors, records.fields.contribuidor)}/>\n                              )}\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"GridCard mb-l\">\n                        <BlockTitle title={'Pelis & series'} description={'Las recomendaciones mas destacadas'} link={'categorias/serie'}/>\n                        <div className=\"container container-xl\">\n                            <div className=\"grid\">\n                              {this.state.isLoading ? <LoadingSpinner /> : Helpers.getCategoryItems(this.state.recommendations, 'pelcula', 4).map((records) =>\n                                <Card {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(this.state.contributors, records.fields.contribuidor)}/>\n                              )}\n                              {this.state.isLoading ? '' : Helpers.getCategoryItems(this.state.recommendations, 'serie', 4).map((records) =>\n                                <Card {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(this.state.contributors, records.fields.contribuidor)}/>\n                              )}\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"MusicGrid\">\n                        <BlockTitle title={'Msica'} description={'Las recomendaciones mas destacadas'} link={'categorias/msica'}/>\n                        <div className=\"container\">\n                            <div className=\"grid mt-s\">\n                                {this.state.isLoading ? <LoadingSpinner /> : Helpers.getCategoryItems(this.state.recommendations,'msica', 8).map((records) =>\n                                  <Musiccard {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(this.state.contributors, records.fields.contribuidor)}/>\n                                )}\n                            </div>\n                        </div>\n\n                        <BlockTitle title={'Podcasts'} description={'Las recomendaciones mas destacadas'} link={'categorias/podcast'} titleclass=\"mt-l\"/>\n                        <div className=\"container\">\n                            <div className=\"grid mt-s\">\n                                {this.state.isLoading ? <LoadingSpinner /> : Helpers.getCategoryItems(this.state.recommendations,'podcast', 4).map((records) =>\n                                  <Podcastcard {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(this.state.contributors, records.fields.contribuidor)}/>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n\n\n                    <div className=\"GridCard\">\n                        <BlockTitle title={'Revistas'} description={'Las recomendaciones mas destacadas'} link={'categorias/revista'}/>\n                        <div className=\"container container-xl\">\n                          <div className=\"grid\">\n                              {this.state.isLoading ? <LoadingSpinner /> : Helpers.getCategoryItems(this.state.recommendations,'revista', 4).map((records) =>\n                                <Card {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(this.state.contributors, records.fields.contribuidor)}/>\n                              )}\n                            <img className=\"lines\" src={process.env.PUBLIC_URL + '/img/dot-3.svg'} alt=\"lines\"/>\n                          </div>\n                        </div>\n                    </div>\n\n\n                    <div className=\"AppGrid mt-l\">\n                        <div className=\"container\">\n                              <div className=\"grid\">\n                                    <div className=\"grid__item width-8/12 width-12/12@m grid\">\n                                        {this.state.isLoading ? <LoadingSpinner /> : Helpers.getCategoryItems(this.state.recommendations,'app', 8).map((records) =>\n                                          <Appcard {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(this.state.contributors, records.fields.contribuidor)}/>\n                                        )}\n                                    </div>\n                                    <div className=\"grid__item width-4/12 width-12/12@m\">\n                                        <BlockTitle title={'Apps'} description={'Apps para todo el mundo'} link={'categorias/app'}/>\n                                    </div>\n                              </div>\n                        </div>\n                    </div>\n\n\n                    <div className=\"GridVideo mt-l\">\n                        <BlockTitle title={'Videos'} description={'Las recomendaciones mas destacadas'} link={'categorias/video'}/>\n                        <div className=\"container container-xl\">\n                          <div className=\"grid\">\n                              {this.state.isLoading ? <LoadingSpinner /> : Helpers.getCategoryItems(this.state.recommendations,'video', 6).map((records) =>\n                                <Videocard {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(this.state.contributors, records.fields.contribuidor)}/>\n                              )}\n                            <img className=\"lines\" src={process.env.PUBLIC_URL + '/img/dot-2.svg'} alt=\"lines\"/>\n                          </div>\n                        </div>\n                    </div>\n\n\n\n\n                    <div className=\"GridColection mt-l\">\n                        <BlockTitle title={'Colecciones'} description={'Las recomendaciones mas destacadas'}/>\n                        <div className=\"container container-xl\">\n                          <div className=\"grid mt-s\">\n                              <Collectioncard title={'darle al coco'} grid={'width-4/12'} number={Helpers.getCollectionItems(this.state.recommendations, 'darle al coco').length}/>\n                              <Collectioncard title={'mantenerse en forma'} grid={'width-4/12'} number={Helpers.getCollectionItems(this.state.recommendations, 'mantenerse en forma').length} />\n                              <Collectioncard title={'pandemias, contagios y visionarios'} grid={'width-4/12'} number=\"0\" />\n                              <Collectioncard title={'aprender'} grid={'width-6/12'} number={Helpers.getCollectionItems(this.state.recommendations, 'aprender').length} />\n                              <Collectioncard title={'futuros'} grid={'width-6/12'} number={Helpers.getCollectionItems(this.state.recommendations, 'futuros').length} />\n                          </div>\n                        </div>\n                    </div>\n\n\n                    <div className=\"ArticlesGrid mt-l\">\n                      <BlockTitle\n                        title={'Qu leer'}\n                        description={'Artculos, newsletters y webs para entretenerse un rato navegando.'}\n                        titleclass=\"big-title\" descriptionclass=\"big-description\" link={'categorias/artculo'}/>\n                      <div className=\"container\">\n                        <div className=\"mt-s\">\n                            {this.state.isLoading ? <LoadingSpinner /> : Helpers.getCategoryItems(this.state.recommendations,'artculo', 20).map((records) =>\n                              <Articlelist {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(this.state.contributors, records.fields.contribuidor)}/>\n                            )}\n                            {this.state.isLoading ? <LoadingSpinner /> : Helpers.getCategoryItems(this.state.recommendations,'newsletter', 20).map((records) =>\n                              <Articlelist {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(this.state.contributors, records.fields.contribuidor)}/>\n                            )}\n                            {this.state.isLoading ? <LoadingSpinner /> : Helpers.getCategoryItems(this.state.recommendations,'web', 20).map((records) =>\n                              <Articlelist {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(this.state.contributors, records.fields.contribuidor)}/>\n                            )}\n                        </div>\n                      </div>\n                    </div>\n\n                    { this.state.isAuthenticated ? '' : <Promocard /> }\n\n\n                    <div className=\"TopicCollection mt-l no@m\">\n                      <div className=\"container container-s\">\n                        <div className=\" grid mt-s\">\n                          {window.$topics && window.$topics.map((temas, key) =>\n                              <Link to={`/temas/${temas}`} key={key} className=\"topic-card width-3/12 width-6/12@m\">{temas}</Link>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n\n\n\n                </main>\n              </div>\n\n              <Footer />\n\n\n            </div>\n          );//render\n\n  }\n}\n\nexport default App;\n","import React from 'react';\n\nimport Card from '../components/Card';\nimport BlockTitle from '../components/BlockTitle';\nimport Musiccard from '../components/Musiccard';\nimport Podcastcard from '../components/Podcastcard';\nimport Articlelist from '../components/Articlelist';\nimport Videocard from '../components/Videocard';\nimport Appcard from '../components/Appcard';\n\nimport * as Helpers from '../Helpers';\n\n\nexport const catTemplate = {\n  card:         ['libro', 'revista'],\n  musiccard:    ['msica'],\n  podcastcard : ['podcast'],\n  articlelist : ['artculo', 'web', 'newsletter'],\n  videocard:    ['video'],\n  appcard:      ['app'],\n  cinemacard:   ['pelcula', 'serie']\n};\n\n// Render items by Template Blocks\n// First define item types to render in groups\n// Then render items in blocks with title & templates\n\nfunction renderCardItems(recommendations, contributors) {\n  return (\n    <div className=\"GridCard\">\n        <div className=\"container container-xl\">\n            <div className=\"grid\">\n              {Helpers.getBlockCategoryItems(recommendations, catTemplate.card).map((records) =>\n                <Card {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(contributors, records.fields.contribuidor)}/>\n              )}\n            </div>\n        </div>\n    </div>\n  )\n}\n\nfunction renderMusicItems(recommendations, contributors, pagetype) {\n  return(\n    <div className=\"MusicGrid-detail mt-l\">\n      <BlockTitle title={pagetype==='categorias' ? '' : 'Msica'} titleclass={pagetype==='favoritos' ? 'small-title' : ''}/>\n      <div className=\"container\">\n          <div className=\"grid\">\n              {Helpers.getBlockCategoryItems(recommendations, catTemplate.musiccard).map((records) =>\n                <Musiccard {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(contributors, records.fields.contribuidor)}/>\n              )}\n          </div>\n      </div>\n    </div>\n  )\n}\n\nfunction renderPodcastItems(recommendations, contributors, pagetype){\n  return(\n    <div className=\"PodcastGrid mt-l\">\n      <div className=\"container mt-l\">\n        <BlockTitle title={pagetype==='categorias' ? '' : 'Para escuchar'} titleclass={pagetype==='favoritos' ? 'small-title' : ''}/>\n        <div className=\"grid\">\n            {Helpers.getBlockCategoryItems(recommendations, catTemplate.podcastcard).map((records) =>\n              <Podcastcard {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(contributors, records.fields.contribuidor)}/>\n            )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction renderArticleItems(recommendations, contributors, pagetype){\n  return(\n    <div className=\"ArticlesGrid mt-l\">\n      <BlockTitle title={pagetype==='categorias' ? '' : 'Ms'} titleclass={pagetype==='favoritos' ? 'small-title' : ''} />\n      <div className=\"container\">\n        <div className=\"grid\">\n            {Helpers.getBlockCategoryItems(recommendations, catTemplate.articlelist).map((records) =>\n              <Articlelist {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(contributors, records.fields.contribuidor)}/>\n            )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction renderVideoItems(recommendations, contributors, pagetype){\n  return(\n    <div className=\"ArticlesGrid mt-l\">\n      <BlockTitle title={pagetype==='categorias' ? '' : 'Videos'} titleclass={pagetype==='favoritos' ? 'small-title' : ''} />\n      <div className=\"container\">\n        <div className=\"grid\">\n            {Helpers.getBlockCategoryItems(recommendations, catTemplate.videocard).map((records) =>\n              <Videocard {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(contributors, records.fields.contribuidor)}/>\n            )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction renderAppItems(recommendations, contributors, pagetype){\n  return(\n    <div className=\"AppGrid-detail mt-l\">\n        <BlockTitle title={pagetype==='categorias' ? '' : 'Apps'} titleclass={pagetype==='favoritos' ? 'small-title' : ''} />\n        <div className=\"container\">\n              <div className=\"grid\">\n                  {Helpers.getBlockCategoryItems(recommendations, catTemplate.appcard).map((records) =>\n                    <Appcard {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(contributors, records.fields.contribuidor)}/>\n                  )}\n              </div>\n        </div>\n    </div>\n  )\n}\n\nfunction renderCinemaItems(recommendations, contributors, pagetype) {\n  return (\n    <div className=\"GridCard\">\n        <BlockTitle title={pagetype==='categorias' ? '' : 'Cinema & Series'} titleclass={pagetype==='favoritos' ? 'small-title' : ''} />\n        <div className=\"container container-xl\">\n            <div className=\"grid\">\n              {Helpers.getBlockCategoryItems(recommendations, catTemplate.cinemacard).map((records) =>\n                <Card {...records.fields} key={records.id} itemId={records.id} autor={Helpers.getContributor(contributors, records.fields.contribuidor)}/>\n              )}\n            </div>\n        </div>\n    </div>\n  )\n}\n\nexport {\n   renderCardItems,\n   renderMusicItems,\n   renderPodcastItems,\n   renderArticleItems,\n   renderVideoItems,\n   renderAppItems,\n   renderCinemaItems\n};\n","import React, { Component } from \"react\";\n\nimport BlockTitle from '../components/BlockTitle';\n\nclass Notfound extends Component {\n  render() {\n\n    return (\n\n      <div className=\"Notfound global\">\n        <BlockTitle title={'Notfound'} description={'No lo hemos esncontrado'}/>\n        <div className=\"rotating-wrapper no@m\">\n          <img src={process.env.PUBLIC_URL + '/img/text.svg'} className=\"rotating-text rotating\" alt=\"Mequedoencasa\"/>\n        </div>\n      </div>\n\n    );\n  }\n}\n\nexport default Notfound;\n","import React, { Component } from 'react';\n\nimport * as Helpers from './Helpers';\nimport * as Templates from './templates/Templates';\n\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport BlockTitle from './components/BlockTitle';\nimport LoadingSpinner from './components/LoadingSpinner';\nimport Notfound from './views/Notfound';\n\n\nclass Detail extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      recommendations: [],\n      category: Helpers.getUrlCategory(),\n      topic: Helpers.getUrlTopic()\n    };\n  }\n\n\n\n  componentDidMount() {\n    fetch(window.$api+'&filterByFormula=Find(%22'+this.state.topic+'%22%2C+'+this.state.category+')')\n    .then((resp) => resp.json())\n    .then(pagedata => {\n\n      //console.log(pagedata);\n      //this.setState({recommendations: pagedata.records});\n      window.$pagedata = pagedata.records;\n      return fetch(window.$api)\n\n    })\n    .then((resp2) => resp2.json())\n    .then(datafull => {\n\n      //console.log(datafull);\n      Helpers.storeUniqueTopics(datafull.records)\n      Helpers.storeUniqueCategories(datafull.records)\n      window.$alldata = datafull.records;\n      return fetch(window.$api_contributors)\n\n    })\n    .then((resp3, data) => resp3.json())\n    .then(contributors => {\n\n      //ONCE WE HAVE ALL DATA FETCHED\n      //THEN WE SETSTATE WHICH CAUSES RERENDER\n      this.setState({\n        isLoading: false,\n        recommendations: window.$pagedata,\n        contributors: contributors.records}\n      );\n      //console.log('allcontributors',contributors.records)\n      //console.log('contributors',this.state.contributors)\n      //console.log('recommendations',this.state.recommendations)\n    })\n    .catch(err => {\n      // Error\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    //If prev url is not the same render again\n    if ( ( Helpers.getUrlTopic() !== prevProps.match.params.id )  || (  Helpers.getUrlCategory() !== prevProps.match.url.split(\"/\")[1])  ) {\n      // SET CLICKED NEW URL\n      this.setState({\n        isLoading: true,\n        category: Helpers.getUrlCategory(),\n        topic : Helpers.getUrlTopic()\n      }, () => {\n        //Call API && Render again when state (async) is done\n        this.componentDidMount()\n      });\n    }\n  }\n\n\n  //Returns current unique categories filtered per category template block\n  matchCategoriesWithTemplates(catArr){\n    return Helpers.getUniqueCategories(this.state.recommendations).filter(matchBlockCat => catArr.includes(matchBlockCat))\n  }\n\n\n  render() {\n\n    window.scrollTo(0, 0);\n\n    return (\n      <div className=\"app_wrapper detail_view\">\n\n        <Header />\n\n        <div className=\"global\">\n          <main>\n            <div id=\"Detail\" className={`pb-xl is-detail ${\"is-\" + this.state.category} ${\"is-\" + this.state.topic.replace(/ /g, \"_\")}`}>\n\n                    {!this.state.isLoading && window.$pagedata.length && window.$pagedata.length === 0\n                      ? <Notfound/>\n                      : <BlockTitle title={this.state.topic} description={'Las recomendaciones de '+this.state.topic+' mas destacadas'} titleclass=\"big-title mt-s\" descriptionclass=\"big-description mb-m\"/>\n                    }\n\n                    {this.state.isLoading ? <LoadingSpinner /> : this.matchCategoriesWithTemplates(Templates.catTemplate.card) && this.matchCategoriesWithTemplates(Templates.catTemplate.card).length ? (\n                      Templates.renderCardItems(this.state.recommendations, this.state.contributors)\n                    ) : ('')}\n\n                    {this.state.isLoading ? '' : this.matchCategoriesWithTemplates(Templates.catTemplate.cinemacard) && this.matchCategoriesWithTemplates(Templates.catTemplate.cinemacard).length ? (\n                      Templates.renderCinemaItems(this.state.recommendations, this.state.contributors, this.state.category)\n                    ) : ('')}\n\n                    {this.state.isLoading ? '' : this.matchCategoriesWithTemplates(Templates.catTemplate.musiccard) && this.matchCategoriesWithTemplates(Templates.catTemplate.musiccard).length ? (\n                      Templates.renderMusicItems(this.state.recommendations, this.state.contributors, this.state.category)\n                    ) : ('')}\n\n                    {this.state.isLoading ? '' : this.matchCategoriesWithTemplates(Templates.catTemplate.podcastcard) && this.matchCategoriesWithTemplates(Templates.catTemplate.podcastcard).length ? (\n                      Templates.renderPodcastItems(this.state.recommendations, this.state.contributors, this.state.category)\n                    ) : ('')}\n\n                    {this.state.isLoading ? '' : this.matchCategoriesWithTemplates(Templates.catTemplate.videocard) && this.matchCategoriesWithTemplates(Templates.catTemplate.videocard).length ? (\n                      Templates.renderVideoItems(this.state.recommendations, this.state.contributors, this.state.category)\n                    ) : ('')}\n\n                    {this.state.isLoading ? '' : this.matchCategoriesWithTemplates(Templates.catTemplate.appcard) && this.matchCategoriesWithTemplates(Templates.catTemplate.appcard).length ? (\n                      Templates.renderAppItems(this.state.recommendations, this.state.contributors, this.state.category)\n                    ) : ('')}\n\n                    {this.state.isLoading ? '' : this.matchCategoriesWithTemplates(Templates.catTemplate.articlelist) && this.matchCategoriesWithTemplates(Templates.catTemplate.articlelist).length ? (\n                      Templates.renderArticleItems(this.state.recommendations, this.state.contributors, this.state.category)\n                    ) : ('')}\n\n\n              <img className=\"lines\" src={process.env.PUBLIC_URL + '/img/lines.svg'} alt=\"lines\"/>\n\n            </div>\n\n          </main>\n\n          <Footer/>\n\n        </div>\n      </div>\n    );\n  }//Render\n\n\n}\n\nexport default Detail;\n","import React, { Component } from \"react\";\n\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport BlockTitle from '../components/BlockTitle';\n\nclass About extends Component {\n  render() {\n\n    return (\n    <div className=\"app_wrapper about_view\">\n\n      <Header />\n      <div className=\"global\">\n        <div className=\"container\">\n          <BlockTitle title={'About'}/>\n          <div className=\"AboutContent mt-s\">\n\n            <h5 className=\"mb-s\">Cmo puedo ayudar a mis amigos (y a m mismo) a pasar un tiempo ms entretenido durante la cuarentena?</h5>\n            <p>El proyecto empieza durante la cuarentena de marzo por el COVID-19. </p>\n          </div>\n        </div>\n      </div>\n\n      <Footer/>\n\n    </div>\n    );\n  }\n}\n\nexport default About;\n","import React, { Component } from \"react\";\nimport * as Helpers from '../Helpers';\n\nimport BlockTitle from '../components/BlockTitle';\nimport LoadingSpinner from '../components/LoadingSpinner';\n\n\nclass Search extends Component {\n\n  constructor(){\n      super();\n      this.state = {\n          isLoading: false,\n          categorias: window.$categories,\n          temas: window.$topics\n      }\n  }\n\n  componentDidMount(){\n\n    if(!window.$categories){\n      this.setState({ isLoading: true });\n      fetch(window.$api)\n        .then((resp) => resp.json())\n        .then(data => {\n\n          Helpers.storeUniqueTopics(data.records)\n          Helpers.storeUniqueCategories(data.records)\n          window.$alldata = data.records;\n          this.setState({\n            isLoading: false,\n            categorias: window.$categories,\n            temas: window.$topics\n          }, () => {\n            //Call API && Render again when state (async) is done\n            this.componentDidMount()\n          });\n\n\n      })\n      .catch(err => {\n        console.log( Error(err));\n      });\n    }\n  }\n\n\n  render() {\n\n    return (\n\n      <div className=\"AllTopics\">\n          <div className=\"Categories mt-l\">\n            {this.state.isLoading ? <LoadingSpinner /> : this.state.categorias?.map((records, key) =>\n              <BlockTitle title={records} link={`categorias/${records}`} key={key}/>\n            )}\n          </div>\n\n          <div className=\"Topics mb-l\">\n            {this.state.isLoading ? '' : this.state.temas?.map((records, key) =>\n              <BlockTitle title={records} link={`temas/${records}`} key={key}/>\n            )}\n          </div>\n      </div>\n\n    );\n  }\n}\n\nexport default Search;\n","import React, { Component } from \"react\";\nimport { Link } from 'react-router-dom';\nimport history from '../history';\nimport Message from '../components/Message';\n\nconst userController = require('../controllers/userController');\n\nclass Login extends Component {\n\n\n  constructor() {\n    super();\n    this.state = {\n      isLoading: false\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  emailChangeHandler = (event) => {\n    this.setState({email: event.target.value});\n    this.setState({isLoading: false});\n  }\n  passwordChangeHandler = (event) => {\n    this.setState({password: event.target.value});\n    this.setState({isLoading: false});\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    //AUTH\n    userController.authenticate(this.state)\n    this.setState({isLoading: true});\n  }\n\n  componentDidMount(){\n    //Clear history state messages\n    if (history.location.state && history.location.state.message) {\n        let state = { ...history.location.state };\n        delete state.message\n        delete state.type\n        history.replace({ ...history.location, state });\n    }\n    this.setState({isLoading: false});\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({isLoading: false});\n  }\n\n  render() {\n    return (\n      <div className=\"app_wrapper login_view\">\n          <div className=\"grid\">\n\n                  <div className=\"grid__item width-3/12 width-12/12@m left-pane no@m\">\n                    <div className=\"left-pane-quote\">\n                      <div className=\"left-pane-quote-text\">\n                        I can get inspiration & cultural references from people around the world.\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"grid__item width-9/12 width-12/12@m right-pane\">\n                    <div className=\"right-pane-content\">\n                      <div className=\"container\">\n                              <div className=\"form-container\">\n                                <div className=\"right-pane-text mb-s\">\n                                  <Link to=\"/\"><img className=\"logo mb-m\" src={process.env.PUBLIC_URL + '/logo.svg'} alt=\"logo\"/></Link>\n                                  <h5 className=\"big-title\">Welcome back.</h5>\n                                  <p>Enter your details below.</p>\n                                </div>\n\n                                {this.props.location.state?.message ?\n                                  <Message type={this.props.location.state.type} message={this.props.location.state.message}/>\n                                  : ''}\n\n                                <form onSubmit={this.handleSubmit} className=\"login-form\">\n                                  <div>\n                                    <label>Email</label>\n                                    <input\n                                      name=\"email\"\n                                      component=\"input\"\n                                      type=\"email\"\n                                      autoComplete=\"email\"\n                                      onChange={this.emailChangeHandler}\n                                      placeholder=\"dieter@rams.com\"\n                                      required\n                                    />\n                                  </div>\n                                  <div>\n                                    <label>Password</label>\n                                    <input\n                                      name=\"password\"\n                                      component=\"input\"\n                                      type=\"password\"\n                                      autoComplete=\"current-password\"\n                                      onChange={this.passwordChangeHandler}\n                                      placeholder=\"Introduce your password\"\n                                      pattern=\".{8,}\"\n                                      required\n                                    />\n                                  </div>\n\n                                  <button className=\"button submitbtn inline\" type=\"submit\">{this.state.isLoading ? 'loading' : 'Login'}</button>\n                                </form>\n                                <span>Dont have an account? <Link to=\"/signup\" className=\"link\">Get started!</Link></span>\n                              </div>\n                      </div>\n                    </div>\n                  </div>\n\n          </div>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import React, { Component } from \"react\";\nimport history from '../history';\nimport { Link } from 'react-router-dom';\n\nimport {ReactComponent as UserIcon} from '../icons/User.svg';\nimport {ReactComponent as LikeIcon} from '../icons/Heart.svg';\nimport {ReactComponent as AddIcon} from '../icons/Plus.svg';\n\nconst userController = require('../controllers/userController.js');\n\nclass HeaderMkt extends Component {\n\n  constructor(){\n      super();\n      this.state = {\n          email:''\n      };\n  }\n\n  emailChangeHandler = (event) => {\n    this.setState({email: event.target.value});\n  }\n  handleSubmit = (event) => {\n    event.preventDefault();\n    history.push({\n      pathname: '/signup',\n      state: {\n        email: this.state.email\n      }\n    })\n  }\n\n\n  render() {\n\n    return (\n      <header className=\"header no@m\">\n        <div className=\"container flex-justify\">\n\n          <ul id=\"primarymenu\" className=\"nav menu\">\n            <li><Link to=\"/\"><img className=\"logo\" src={process.env.PUBLIC_URL + '/logo.svg'} alt=\"logo\"/></Link></li>\n            <li><Link to=\"/feed\">Discover</Link></li>\n          </ul>\n          { userController.isAuthenticated() ? (\n            <ul id=\"usermenu\" className=\"nav menu\">\n              <li>\n                <Link to=\"/create\" className=\"link\"><AddIcon /> Create</Link>\n              </li>\n              <li>\n                <Link to=\"/likes\"><LikeIcon /> Likes</Link>\n              </li>\n              <li>\n                <Link to=\"/profile\"><UserIcon /> Profile</Link>\n              </li>\n            </ul>\n          ) : (\n            <div className=\"form form-wrap\">\n              <form className=\"email-form no@m\" onSubmit={this.handleSubmit}>\n                <div className=\"email-form__input-wrapper\">\n                  <input\n                    type=\"email\"\n                    id=\"email\"\n                    className=\"email-form__input\"\n                    aria-required=\"true\"\n                    aria-invalid=\"false\"\n                    aria-describedby=\"signup-cta-error\"\n                    placeholder=\"Email\"\n                    autoComplete=\"email\"\n                    onChange={this.emailChangeHandler}\n                    />\n                </div>\n                <button type=\"submit\" className=\"email-form__submit\" mailto=\"\">\n                  <span className=\"email-form__submit__label\">Get started!</span>\n                </button>\n              </form>\n              <Link to=\"/login\" className=\"button button-outline button-header-login\">Sign in</Link>\n            </div>\n          )}\n        </div>\n      </header>\n    );\n  }\n}\n\nexport default HeaderMkt;\n","import React, { Component } from \"react\";\nimport { Link } from 'react-router-dom';\n\nimport HeaderMkt from '../components/HeaderMkt';\nimport Footer from '../components/Footer';\n\nconst userController = require('../controllers/userController.js');\n\nclass Home extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAuthenticated: userController.isAuthenticated()\n    };\n  }\n\n\n  render() {\n\n    return (\n      <div className=\"app_wrapper home_view\">\n\n        <HeaderMkt />\n\n        <div className=\"global\">\n          <div className=\"container\">\n\n            <div className=\"grid\">\n                  <div className=\"grid__item width-6/12 width-12/12@m\">\n                    <Link to=\"/\"><img className=\"logo mb-m no@dkt\" src={process.env.PUBLIC_URL + '/logo.svg'} alt=\"logo\"/></Link>\n                    <h1 className=\"main-title\">The sharing platform for the <span className=\"scratch\">quarantine</span> people.</h1>\n                    <p className=\"hero-text\">We make it easy to find inspiration, references, and grow informed online communities that are built to last.</p>\n\n                    { this.state.isAuthenticated\n                      ? <Link to=\"/create\" className=\"button\">Publish now!</Link>\n                      : <Link to=\"/signup\" className=\"button\">Get Started!</Link>\n                    }\n\n                  </div>\n                  <div className=\"grid__item width-6/12 no@m\">\n                    <picture className=\"picture-main-image\">\n                      <img className=\"main-image\" src=\"https://images.unsplash.com/photo-1446511437394-36cdff3ae1b3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80\" alt=\"cover\"></img>\n                    </picture>\n                    <div className=\"bg-home\"></div>\n                  </div>\n            </div>\n\n          </div>\n        </div>\n\n        <Footer/>\n\n      </div>\n    );\n  }\n}\n\nexport default Home;\n","import React, { Component } from \"react\";\nimport Like from './Like';\n\nclass FavItem extends Component {\n\n  render() {\n      return (\n        <a className=\"favitem\" href={this.props.url} target=\"_blank\" rel=\"noopener noreferrer\" data-id={this.props.id}>\n          <div className=\"favitem-image-holder\">\n            <img className=\"favitem-image-holder-img\" src={this.props.imageUrl} alt=\"cover\"/>\n          </div>\n          <div className=\"favitem-description\">\n            <div className=\"favitem-category badge inline\">{this.props.categorias}</div>\n            <h5>{this.props.title}</h5>\n            <p className=\"description\">{this.props.description}</p>\n          </div>\n          <Like itemId={this.props.itemId}/>\n        </a>\n      );\n  }\n}\n\nexport default FavItem;\n","import React, { Component } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport $ from 'jquery';\n\nclass Confetti extends React.Component {\n\n  constructor() {\n     super();\n   }\n\n\n\n  componentDidMount(){\n\n    const create = (i) => {\n      console.log('create')\n      var width = Math.random() * 8;\n      var height = width * 0.4;\n      var colourIdx = Math.ceil(Math.random() * 3);\n      var colour = \"confetti-red\";\n      switch(colourIdx) {\n        case 1:\n          colour = \"confetti-yellow\";\n          break;\n        case 2:\n          colour = \"confetti-blue\";\n          break;\n        default:\n          colour = \"confetti-red\";\n      }\n      $('<div class=\"confetti-'+i+' '+colour+'\"></div>').css({\n        \"width\" : width+\"px\",\n        \"height\" : height+\"px\",\n        \"top\" : -Math.random()*20+\"%\",\n        \"left\" : Math.random()*100+\"%\",\n        \"opacity\" : Math.random()+0.5,\n        \"transform\" : \"rotate(\"+Math.random()*360+\"deg)\"\n      }).appendTo('.wrapper-confetti');\n\n      drop(i);\n    }\n\n    const drop = (x) => {\n      $('.confetti-'+x).animate({\n        top: \"100%\",\n        left: \"+=\"+Math.random()*15+\"%\"\n      }, Math.random()*3000 + 3000, function() {\n        reset(x);\n      });\n    }\n\n    const reset = (x) => {\n      $('.confetti-'+x).animate({\n        \"top\" : -Math.random()*20+\"%\",\n        \"left\" : \"-=\"+Math.random()*15+\"%\"\n      }, 0, function() {\n        drop(x);\n      });\n    }\n\n    for (var i = 0; i < 200; i++) {\n       create(i);\n    }\n\n  }\n\n\n  render() {\n     return (\n       <div className=\"wrapper-confetti\"></div>\n     );\n  }\n}\nexport default Confetti;\n","import React, { Component } from \"react\";\nimport { Link } from 'react-router-dom';\nimport history from '../history';\nimport * as Helpers from '../Helpers';\n\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport FavItem from '../components/FavItem';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport {ReactComponent as UserIcon} from '../icons/User.svg';\nimport {ReactComponent as AddIcon} from '../icons/Plus.svg';\nimport Confetti from '../components/Confetti';\n\nconst dataController = require('../controllers/dataController.js');\nconst recommendationController = require('../controllers/recommendationController.js');\nconst userController = require('../controllers/userController.js');\n\n//AIRTABLE HELPERS\nconst Airtable = require('airtable');\nconst base = new Airtable({\n  apiKey: process.env.REACT_APP_AIRTABLE_API_KEY,\n}).base(process.env.REACT_APP_AIRTABLE_BASE_ID);\n\n\n\nclass Profile extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading : true,\n      renderItems : [],\n      pubItems  : 0,\n      likeItems : Helpers.getStorageFavs() ? Helpers.getStorageFavs()?.length : '0',\n      makeConfetti : this.checkConfetti()\n    };\n  }\n\n  getUserPubItems(){\n    const email = userController.getSession()?.email;\n    if (!email) {\n      this.setState({ isLoading: false, renderItems: [] });//WHEN NO SESSION && NO EMAIL\n     return\n    }\n    const table = base('contributors');\n    const options = { filterByFormula: `OR(email = '${email}', name = '${email}')` }\n    dataController.getAirtableRecords(table, options)\n      .then( async (users) => {\n        //USERS SHOULD BE ONLY ONE THAT MATCH WITH EMAIL\n        const userData = users[0]?.fields;\n        if (!userData?.items) {\n          this.setState({ isLoading: false, renderItems: [] });//WHEN SESSION && NO ITEMS\n        }\n        if (!userData?.likes) userData.likes = []\n        const hydratedUserWithPubItems = [];\n        //REPLACE LIKES ID's WITH ALL THE ITEM'S CONTENT\n        hydratedUserWithPubItems.push(await recommendationController.hydrateUserPubItems(userData) );\n        userController.setLocalStorageFavs(userData.likes)\n        this.setState({\n          isLoading   : false,\n          renderItems : userData?.items,\n          pubItems    : userData?.items?.length ? userData?.items?.length : '0',\n          likeItems   : userData?.likes?.length ? userData?.likes?.length : '0'\n        });\n      })\n      .catch(err => {\n        console.log( Error(err));\n      });\n  }\n\n  checkConfetti(){\n    if (this.props.location.state?.type === 'success' ){\n      return true\n    }else{\n      return false\n    }\n  }\n\n  componentDidMount() {\n    //Clear history state messages\n    if (history.location.state && history.location.state.message) {\n        let state = { ...history.location.state };\n        delete state.message\n        delete state.type\n        history.replace({ ...history.location, state });\n    }\n\n    this.getUserPubItems()\n  }\n\n\n  render() {\n\n    return (\n    <div className=\"app_wrapper profile_view\">\n\n      { this.state.makeConfetti ? <Confetti /> : ''}\n\n      <Header />\n      <div className=\"global\">\n          <div className=\"ArticlesGrid mt-l\">\n            <div className=\"container container-s\">\n\n              <div className=\"profile-user mt-xl\">\n                <div className=\"profile-user-image-holder\">\n                  <UserIcon />\n                </div>\n                <div className=\"profile-user-info\">\n                  <div className=\"profile-user-name\"><h3>{userController.getSession()?.name}</h3></div>\n                  <div className=\"profile-user-description\"><p>{userController.getSession()?.description}</p></div>\n                  <div className=\"profile-user-data\">\n                    <span>{ this.state.likeItems } Likes</span>\n                    <span>{ this.state.pubItems } Published</span>\n                    <span>0 Following</span>\n                    <span>0 Followers</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"mt-m\">\n              { this.state.isLoading\n                  ? <LoadingSpinner />\n                  : this.state.renderItems && this.state.renderItems.length > 0\n                      ? this.state.renderItems.map( (records) => <FavItem {...records} key={records.id} itemId={records.id} /> )\n                      : <div className=\"empty-pubrecords\">\n                          <Link to=\"/create\" className=\"link inline-block mb-s\"><AddIcon /> Create</Link>\n                          <div>\n                            Welcome <span role=\"img\" aria-label=\"welcome\"></span>! Now you can share your referents and they will appear here.\n                            <br></br>\n                            Or start browsing favs in <Link to=\"/feed\" className=\"underline\">Discover</Link>\n                          </div>\n                        </div>\n              }\n              </div>\n              <div className=\"mt-l mb-l\">\n                <button className=\"underline grey auto block\" onClick={userController.signOut}>Sign Out</button>\n              </div>\n            </div>\n        </div>\n      </div>\n\n      <Footer/>\n\n    </div>\n    );\n  }\n}\n\nexport default Profile;\n","import React, { Component } from \"react\";\nimport { Link } from 'react-router-dom';\n\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport FavItem from '../components/FavItem';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport {ReactComponent as UserIcon} from '../icons/User.svg';\nimport {ReactComponent as AddIcon} from '../icons/Plus.svg';\n\nconst dataController = require('../controllers/dataController.js');\nconst recommendationController = require('../controllers/recommendationController.js');\n\n//AIRTABLE HELPERS\nconst Airtable = require('airtable');\nconst base = new Airtable({\n  apiKey: process.env.REACT_APP_AIRTABLE_API_KEY,\n}).base(process.env.REACT_APP_AIRTABLE_BASE_ID);\n\n\n\nclass ExternalProfile extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading   : true,\n      renderItems : [],\n      pubItems    : 0,\n      likeItems   : 0,\n      urlName     : decodeURIComponent(window.location.pathname.split(\"/\").pop())\n    };\n\n  }\n\n  getUserPubItems(){\n    const table = base('contributors');\n    const options = { filterByFormula: `{name} = '${this.state.urlName}'` }\n\n    dataController.getAirtableRecords(table, options)\n      .then( async (users) => {\n        //USERS SHOULD BE ONLY ONE THAT MATCH WITH EMAIL\n        const userData = users[0]?.fields;\n        if (!userData?.items) {\n          this.setState({ isLoading: false, renderItems: [] });//WHEN SESSION && NO ITEMS\n        }\n        if (!userData?.likes) userData.likes = []\n        const hydratedUserWithPubItems = [];\n        //REPLACE LIKES ID's WITH ALL THE ITEM'S CONTENT\n        hydratedUserWithPubItems.push(await recommendationController.hydrateUserPubItems(userData) );\n\n        this.setState({\n          isLoading   : false,\n          renderItems : userData?.items,\n          pubItems    : userData?.items?.length ? userData?.items?.length : '0',\n          likeItems   : userData?.likes?.length ? userData?.likes?.length : '0'\n        });\n      })\n      .catch(err => {\n        console.log( Error(err));\n      });\n  }\n\n\n\n  componentDidMount() {\n    console.log('HEY', this.state.urlName)\n    //REVIEW WHEN USER LIKES HIS OWN ITEMS && UPDATE COUNTER\n    this.getUserPubItems()\n  }\n\n\n  render() {\n\n    return (\n    <div className=\"app_wrapper profile_view\">\n\n      <Header />\n      <div className=\"global\">\n          <div className=\"ArticlesGrid mt-l\">\n            <div className=\"container container-s\">\n\n              <div className=\"profile-user mt-xl\">\n                <div className=\"profile-user-image-holder\">\n                  <UserIcon />\n                </div>\n                <div className=\"profile-user-info\">\n                  <div className=\"profile-user-name\"><h3>{this.state.urlName}</h3></div>\n                  <div className=\"profile-user-description\"><p>{this.state?.urlName}</p></div>\n                  <div className=\"profile-user-data\">\n                    <span>{ this.state.likeItems } Likes</span>\n                    <span>{ this.state.pubItems } Published</span>\n                    <span>0 Following</span>\n                    <span>0 Followers</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"mt-m\">\n              { this.state.isLoading\n                  ? <LoadingSpinner />\n                  : this.state.renderItems && this.state.renderItems.length > 0\n                      ? this.state.renderItems.map( (records) => <FavItem {...records} key={records.id} itemId={records.id} /> )\n                      : <div className=\"empty-pubrecords\">\n                          <Link to=\"/create\" className=\"link inline-block mb-s\"><AddIcon /> Create</Link>\n                          <div>Welcome <span role=\"img\" aria-label=\"welcome\"></span>! Now you can share your referents and they will appear here.</div>\n                        </div>\n              }\n              </div>\n\n            </div>\n        </div>\n      </div>\n\n      <Footer/>\n\n    </div>\n    );\n  }\n}\n\nexport default ExternalProfile;\n","import React, { Component } from \"react\";\n\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport BlockTitle from '../components/BlockTitle';\nimport FavItem from '../components/FavItem';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport {ReactComponent as LikeIcon} from '../icons/Heart.svg';\n\nconst recommendationController = require('../controllers/recommendationController.js');\nconst userController = require('../controllers/userController.js');\n\n//AIRTABLE HELPERS\nconst Airtable = require('airtable');\nconst data = require('../controllers/dataController.js');\nconst base = new Airtable({\n  apiKey: process.env.REACT_APP_AIRTABLE_API_KEY,\n}).base(process.env.REACT_APP_AIRTABLE_BASE_ID);\nconst table = base('contributors');\n\nclass Likes extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading : true,\n      userData  : []\n    };\n  }\n\n  getUserFavs(){\n    const email = userController.getSession()?.email;\n    const options = { filterByFormula: `OR(email = '${email}', name = '${email}')` }\n\n    if (!email) {\n      //WHEN NO SESSION && NO EMAIL\n      this.setState({ isLoading: false, renderItems: [] });\n     return\n    }\n\n    data.getAirtableRecords(table, options)\n      .then( async (users) => {\n        //USERS SHOULD BE ONLY ONE,THE ONLY THAT MATCH WITH EMAIL\n        if (!users?.length){\n          //WHEN NO USERS\n          this.setState({ isLoading: false, renderItems: [] });\n          return\n        }\n        const user = users[0]?.fields;\n        if (!user?.likes) user.likes = []\n        const hydratedFavItems = await recommendationController.getHydratedFavItems(user.likes)\n        userController.setLocalStorageFavs(user.likes)\n\n        this.setState({\n          isLoading: false,\n          userData: user,\n          renderItems: hydratedFavItems\n        });\n        //console.log('hydratedFavItems',  user.likes, hydratedFavItems)\n        return;\n      })\n  }\n\n  componentDidMount() {\n    //Set User Favs\n    this.getUserFavs()\n  }\n\n\n  render() {\n\n    return (\n    <div className=\"app_wrapper profile_view\">\n\n      <Header />\n      <div className=\"global\">\n        <div className=\"container\">\n          <div className=\"ArticlesGrid mt-l\">\n            <BlockTitle title={'Likes'}/>\n\n            <div className=\"container\">\n              <div className=\"mt-s\">\n                { this.state.isLoading\n                    ? <LoadingSpinner />\n                    : this.state.renderItems && this.state.renderItems.length > 0\n                        ? this.state.renderItems.map( (records) => <FavItem {...records} key={records.id} itemId={records.id} /> )\n                        : <div className=\"empty-pubrecords\">\n                            <LikeIcon className=\"icon-40 icon-grey mb-s\"/>\n                            <div>Hey! Your favourite items will appear here. You can start by clicking the heart icon on any item.</div>\n                          </div>\n                }\n              </div>\n            </div>\n          </div>\n\n        </div>\n      </div>\n\n      <Footer/>\n\n    </div>\n    );\n  }\n}\n\nexport default Likes;\n","import React, { Component } from \"react\";\nimport history from '../history';\nimport ImageUploader from \"react-images-upload\";\nimport * as Helpers from '../Helpers';\nimport Header from '../components/Header';\nimport Message from '../components/Message';\n\nconst recommendationController = require('../controllers/recommendationController.js');\n\n\n//@TODO\n//REVIEW MESSAGING : SUCCESS && ERROR\n\nclass Create extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      isLoading: true,//until getting dropdown categories\n      contribuidor: [JSON.parse(localStorage.getItem('userSession'))?.id]\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n  }\n\n  titleChangeHandler = (event) => {\n    this.setState({title: event.target.value});\n  }\n  descriptionChangeHandler = (event) => {\n    this.setState({description: event.target.value});\n  }\n  urlChangeHandler = (event) => {\n    this.setState({url: event.target.value});\n  }\n  passwordChangeHandler = (event) => {\n    this.setState({password: event.target.value});\n  }\n  categoriasChangeHandler = (event) => {\n    this.setState({categorias: event.target.value});\n  }\n  temasChangeHandler = (event) => {\n    this.setState({temas: [event.target.value]});\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    this.setState({isLoading: true});\n    recommendationController.uploadToCloudinary(this.state, recommendationController.addItem) //Upload to cloudinary, the to airtable\n  }\n\n\n  getUniqueCategories(){\n    fetch(window.$api)\n    .then((resp) => resp.json())\n    .then(data => {\n      Helpers.storeUniqueTopics(data.records)\n      Helpers.storeUniqueCategories(data.records)\n      window.$alldata = data.records;\n      this.setState({\n        isLoading: false,\n        uniqueCategories: window.$categories,\n        uniqueTopics: window.$topics\n      });\n\n    })\n  }\n\n\n\n\n  componentDidMount() {\n    const uniqueCats = window.$categories\n    const uniqueTops = window.$topics\n\n    if ( !uniqueCats || !uniqueTops) {\n      this.getUniqueCategories()\n    }else{\n      this.setState({\n        isLoading: false,\n        uniqueCategories: uniqueCats,\n        uniqueTopics : uniqueTops\n      });\n    }\n\n    //Clear history state messages\n    if (history.location.state && history.location.state.message) {\n        let state = { ...history.location.state };\n        delete state.message\n        delete state.type\n        history.replace({ ...history.location, state });\n    }\n\n    //Add required to image uploader input\n    var inputUpload = document.getElementsByName(\"featured_image\")[0]\n    inputUpload.required = true;\n\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({isLoading: false});\n  }\n\n\n  onDrop(pictureFiles, pictureDataURLs) {\n     //console.log('onDrop', pictureFiles)\n     //this.uploadToCloudinary(pictureFiles[0])\n     this.setState({imageUrl: pictureFiles[0]});\n   }\n\n\n\n\n  render() {\n\n    return (\n      <div className=\"app_wrapper create_view\">\n        <Header />\n        <div className=\"global\">\n          <div className=\"container container-s\">\n\n            <div className=\"form-container\">\n              <div className=\"mb-s text-center\">\n                <h3 className=\"centered\">Add an item</h3>\n                <p>Tell everyone why its awesome.</p>\n              </div>\n\n              <form onSubmit={this.handleSubmit} className=\"signup-form\">\n                <div className=\"grid\">\n                        <div className=\"grid__item width-5/12 width-12/12@m\">\n                           <div>\n                             <ImageUploader\n                               name=\"featured_image\"\n                               className={'create-item-uploader'}\n                               withPreview={true}\n                               withIcon={false}\n                               singleImage={true}\n                               buttonText=\"Choose image\"\n                               onChange={this.onDrop}\n                               imgExtension={[\".jpg\", \".gif\", \".png\", \".gif\"]}\n                               maxFileSize={5242880}\n                               required\n                             />\n                           </div>\n                       </div>\n                       <div className=\"grid__item width-7/12 width-12/12@m\">\n\n                         {history.location.state && this.props.location.state?.message ?\n                           <Message type={this.props.location.state.type} message={this.props.location.state.message}/>\n                           : ''}\n                           <div>\n                             <label>Item Link (External Reference)</label>\n                             <input\n                               name=\"url\"\n                               component=\"input\"\n                               type=\"text\"\n                               onChange={this.urlChangeHandler}\n                               placeholder=\"External url for the item source\"\n                               required\n                             />\n                           </div>\n                          <div>\n                            <label>Title</label>\n                            <input\n                              name=\"title\"\n                              component=\"input\"\n                              type=\"text\"\n                              onChange={this.titleChangeHandler}\n                              placeholder=\"Awesome title\"\n                              required\n                            />\n                          </div>\n                          <div>\n                            <label>Description</label>\n                            <input\n                              name=\"description\"\n                              component=\"input\"\n                              type=\"text\"\n                              onChange={this.descriptionChangeHandler}\n                              placeholder=\"Short description for the item\"\n                              required\n                            />\n                          </div>\n                          <div>\n                            <label>Category</label>\n                            <select\n                              name=\"categorias\"\n                              onChange={this.categoriasChangeHandler}\n                              required\n                            >\n                            <option hidden disabled selected value=\"\">Select a category</option>\n                            {this.state.isLoading ? '' : this.state?.uniqueCategories.map((category, i) => <option key={i} value={category}>{category}</option>)}\n                            </select>\n                          </div>\n                          <div>\n                            <label>Topic</label>\n                            <select\n                              name=\"temas\"\n                              onChange={this.temasChangeHandler}\n                            >\n                            <option hidden disabled selected value=\"\">Select a topic</option>\n                            {this.state.isLoading ? '' :this.state?.uniqueTopics.map((topic, i) => <option key={i} value={topic}>{topic}</option>)}\n                            </select>\n                          </div>\n\n                          <button className=\"button submitbtn inline mt-s\" type=\"submit\">{this.state.isLoading ? 'loading' : 'Create Item'}</button>\n                    </div>\n              </div>\n            </form>\n\n            </div>\n\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default Create;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router, Route, Switch, Redirect } from 'react-router-dom'\nimport history from './history';\n\n\nimport './css/index.css';\n\nimport BottomBar from './components/BottomBar';\n\nimport App from './App';\nimport Detail from './Detail';\nimport About from './views/About';\nimport Notfound from './views/Notfound';\nimport Search from './views/Search';\nimport Signup from './views/Signup';\nimport Login from './views/Login';\nimport Home from './views/Home';\nimport Profile from './views/Profile';\nimport ExternalProfile from './views/ExternalProfile';\nimport Likes from './views/Likes';\nimport Create from './views/Create';\n\nimport * as serviceWorker from './serviceWorker';\nconst userController = require('./controllers/userController.js');\n\nwindow.$api = 'https://api.airtable.com/v0/'+process.env.REACT_APP_AIRTABLE_BASE_ID+'/recommendations?api_key='+process.env.REACT_APP_AIRTABLE_API_KEY;\nwindow.$api_contributors = 'https://api.airtable.com/v0/'+process.env.REACT_APP_AIRTABLE_BASE_ID+'/contributors?api_key='+process.env.REACT_APP_AIRTABLE_API_KEY;\n\nconst AuthenticatedRoute = ({ component: Component, ...rest}) => (\n  <Route\n    {...rest}\n    render={props =>\n      userController.isAuthenticated() ? (\n        <Component {...props}/>\n      ) : (\n        <Redirect to={{\n            pathname:'/signup',\n            state:{from: props.location}\n          }}\n        />\n      )\n    }\n  />\n)\n\n\nconst routing = (\n  <Router history={history}>\n\n      <Switch>\n\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/feed\" component={App} />\n\n        <Route path=\"/categorias/:id\" component={Detail} />\n        <Route path=\"/temas/:id\" component={Detail} />\n        <Route path=\"/colecciones/:id\" component={Detail} />\n        <Route path=\"/profile/:id\" component={ExternalProfile} />\n\n        <Route exact path=\"/about\" component={About} />\n        <Route exact path=\"/search\" component={Search} />\n\n        <Route exact path=\"/signup\" component={Signup} />\n        <Route exact path=\"/login\" component={Login} />\n\n        <AuthenticatedRoute path=\"/create\" component={Create}/>\n        <AuthenticatedRoute path=\"/likes\" component={Likes}/>\n        <AuthenticatedRoute path=\"/profile\" component={Profile}/>\n\n        <Route component={Notfound} />\n\n      </Switch>\n\n      <BottomBar/>\n\n  </Router>\n)\n\n\nReactDOM.render(routing, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","//HOW TO USE\n//const data = require('./dataController.js');\n//data.getAirtableRecords(table, options)\n\nexport const getAirtableRecords = (table, options) => {\n  let records = [];\n  const params = {\n    view: 'Grid view',\n    pageSize: 15,\n  };\n\n  Object.assign(params, options);\n\n  return new Promise((resolve, reject) => {\n    // Cache results if called already\n    if (records.length > 0) {\n      resolve(records);\n    }\n\n    const processPage = (partialRecords, fetchNextPage) => {\n      records = [...records, ...partialRecords];\n      fetchNextPage();\n    };\n\n    const processRecords = err => {\n      if (err) {\n        reject(err);\n        return;\n      }\n\n      resolve(records);\n    };\n\n    table.select(params).eachPage(processPage, processRecords);\n  });\n};\n","import { createBrowserHistory } from 'history';\n\nexport default createBrowserHistory();\n","import history from '../history';\nimport * as Helpers from '../Helpers';\n\nconst data = require('./dataController.js');\nconst userController = require('./userController.js');\n\n//AIRTABLE HELPERS\nconst Airtable = require('airtable');\nconst base = new Airtable({\n  apiKey: process.env.REACT_APP_AIRTABLE_API_KEY,\n}).base(process.env.REACT_APP_AIRTABLE_BASE_ID);\nconst table = base('recommendations');\n\n\n\n//METHODS\nexport const getRecommendationById = (id) => {\n  return new Promise((resolve, reject) => {\n    const processRecord = (err, record) => {\n      if (err) {\n        reject(err);\n        return;\n      }\n      const id = { id:record.id };\n      const fields = record.fields;\n      record = {...id, ...fields};\n      resolve(record);\n    };\n    base('recommendations').find(id, processRecord);\n  });\n}\n\nexport const hydrateUserLikes = async (user) => {\n  //console.log('hydrateUserLikes',user)\n  let likeIds = user.likes;\n  let recommendationsWithDetails = [];\n  if (!likeIds) return [];\n  for( const id of likeIds) {\n    recommendationsWithDetails.push(await getRecommendationById(id))\n  }\n  user.likes = recommendationsWithDetails;\n  return user;\n}\n\nexport const hydrateUserPubItems = async (user, next) => {\n  //console.log('hydrateUserPubItems',user)\n  let pubitemIds = user.items;\n  let pubitemWithDetails = [];\n  if (!pubitemIds) return [];\n  for( const id of pubitemIds) {\n    pubitemWithDetails.push(await getRecommendationById(id))\n  }\n  user.items = pubitemWithDetails;\n  return user;\n}\n\n\n\n//RETURNS BOOLEAN\nconst findItem = async (title, url) => {\n  //console.log('findItem', title, url)\n  let recordExists = false;\n  let options = {};\n  if (title && url) {\n    options = {\n      filterByFormula: `OR(title = '${title}', url = '${url}')`\n    };\n  } else {\n    options = {\n      filterByFormula: `OR(title = '${title}', url = '${title}')`\n    };\n  }\n\n  const items = await data.getAirtableRecords(table, options);\n\n  items.filter(item => {\n    if (item.get('title') === title || item.get('url') === url) {\n      return (recordExists = true);\n    }\n    return (recordExists = false);\n  });\n\n  return recordExists;\n};\n\n\n//ITEM MANAGEMENT\nexport const addItem = async (req) => {\n  //console.log('addItem', req)\n  const { title, description, url, imageUrl, categorias, temas, contribuidor } = req;\n  const itemExists = await findItem(title, url);\n\n  if (itemExists) {\n    console.log('itemExists')\n    history.push({\n      pathname: '/create',\n      state: { type: 'error', message: 'It seems that it already exists. Please try again with another one.' }\n    })\n    return;\n  }\n\n  table.create(\n    {\n      title,\n      description,\n      url,\n      imageUrl,\n      categorias,\n      temas,\n      contribuidor\n    },\n    function(err, record) {\n      if (err) {\n        console.error(err);\n        history.push({\n          pathname: '/create',\n          state: { type: 'error', message: 'Something happened when uploading. Please try again.' }\n        })\n        return;\n      }\n      //console.log(record)\n      req.id = record.getId();\n      //Success creating item!\n      history.push({\n        pathname: '/profile',\n        state: { type: 'success',  message: 'Item created succesfully!' }\n      })\n    }\n  );\n};\n\n\n\nexport const uploadToCloudinary = (file, next) => {\n  var url = `https://api.cloudinary.com/v1_1/${process.env.REACT_APP_CLOUDINARY_CLOUD_NAME}/upload`;\n  var xhr = new XMLHttpRequest();\n  var fd = new FormData();\n  xhr.open('POST', url, true);\n  xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  fd.append('upload_preset', 'cloudinary_airtable_preset');\n  fd.append('tags', 'browser_upload'); // Optional - add tag for image admin in Cloudinary\n  fd.append('file', file.imageUrl);\n  xhr.send(fd);\n  xhr.onreadystatechange = function(e) {\n    if (xhr.readyState === 4 && xhr.status === 200) {\n      // File uploaded successfully\n      var response = JSON.parse(xhr.responseText);\n      var url = response.secure_url;\n      file.imageUrl = url;\n      next(file)//next function add item\n    }\n    if (xhr.status === 400) {\n      history.push({\n        pathname: '/create',\n        state: { type: 'error', message: 'Something happened when uploading. Please try again.'}\n      })\n    }\n    //@TODO Look for errors\n    // history.push({\n    //   pathname: '/create',\n    //   state: { type: 'error', message: 'Something happened when uploading. Please try again.'}\n    // })\n\n  }.bind(this);\n}\n\n\n//MIXES LOCAL STORAGE ITEMS WITH AIRTABLE LIKES PRIORIZING LOCALSTORAGE\n//THEN UPDATES TABLE AND RETURNS LIKES WITH DETAILS\n//@PARAMS Array with like id's\nexport const syncMixLocalwithTableFavs = async (userlikes) => {\n  //Get storage favs\n  let storageFavs = Helpers.getStorageFavs()\n  // if ( Object.keys(storageFavs).length === 0 ){\n  //   syncSetStorageFavs(userlikes)\n  //   storageFavs = Helpers.getStorageFavs()\n  // }\n  if (!userlikes) userlikes = [];\n  //Get matching id's\n  let matchingFavs = userlikes.filter(recommendation => storageFavs.some(favId => recommendation.id === favId))\n  let matchingIds = [];\n  matchingFavs.map((item) => matchingIds.push(item.id) )\n  //Make one array storage + only matching\n  let union = [...storageFavs, ...matchingIds];\n  let withoutDuplicates = Array.from(new Set(union));\n  let withoutDuplicatesWithDetails = [];\n  for( const id of withoutDuplicates) {\n    withoutDuplicatesWithDetails.push(await getRecommendationById(id))\n  }\n  //UDATE with arr of local + table likes\n  userController.updateUserLikes(withoutDuplicates)\n  return withoutDuplicatesWithDetails\n}\n\n\n\nexport const getHydratedFavItems = async (userlikes) => {\n  if (!userlikes) userlikes = [];\n  let itemsWithDetails = [];\n  for( const id of userlikes) {\n    itemsWithDetails.push(await getRecommendationById(id))\n  }\n  return itemsWithDetails\n}\n\n\n\n\n\n\n\n\n\n//GET METADATA\n//NOT USED\n// const getMeta = () => {\n//   fetch('https://cors-anywhere.herokuapp.com/' + 'https://ggili.com/aprendiendo-de-las-vegas-libro-2856.html')\n//     .then(res => {\n//       console.log('HEYYY', res, res.method)\n//     });\n// }\n//\n// const doCORSRequest = (options, printResult) => {\n//\n//   var x = new XMLHttpRequest();\n//   x.open(options.method, 'https://cors-anywhere.herokuapp.com/' + 'https://ggili.com/aprendiendo-de-las-vegas-libro-2856.html' );\n//   x.onload = x.onerror = function() {\n//     printResult(\n//       options.method + ' ' + options.url + '\\n' +\n//       x.status + ' ' + x.statusText + '\\n\\n' +\n//       (x.responseText || '')\n//     );\n//   };\n//   x.send(options.data);\n// }\n"],"sourceRoot":""}